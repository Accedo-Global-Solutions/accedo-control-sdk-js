!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.appgrid=e()}(this,function(){"use strict";function t(t){return t&&t.__esModule?t.default:t}function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t,e,r){var n=e&&r||0,o=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){o<16&&(e[n+o++]=it[t])});o<16;)e[n+o++]=0;return e}function n(t,e){var r=e||0,n=ot;return n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]}function o(t,e,r){var o=e&&r||0,i=e||[];t=t||{};var a=void 0!==t.clockseq?t.clockseq:ct,s=void 0!==t.msecs?t.msecs:(new Date).getTime(),u=void 0!==t.nsecs?t.nsecs:lt+1,c=s-ft+(u-lt)/1e4;if(c<0&&void 0===t.clockseq&&(a=a+1&16383),(c<0||s>ft)&&void 0===t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ft=s,lt=u,ct=a,s+=122192928e5;var f=(1e4*(268435455&s)+u)%4294967296;i[o++]=f>>>24&255,i[o++]=f>>>16&255,i[o++]=f>>>8&255,i[o++]=255&f;var l=s/4294967296*1e4&268435455;i[o++]=l>>>8&255,i[o++]=255&l,i[o++]=l>>>24&15|16,i[o++]=l>>>16&255,i[o++]=a>>>8|128,i[o++]=255&a;for(var p=t.node||ut,d=0;d<6;d++)i[o+d]=p[d];return e?e:n(i)}function i(t,e,r){var o=e&&r||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var i=t.random||(t.rng||nt)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var a=0;a<16;a++)e[o+a]=i[a];return e||n(i)}function a(t,e){for(var r=-1,n=t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return vt(t)?t:Object(t)}function c(t){return function(e,r,n){for(var o=bt(e),i=n(e),a=i.length,s=t?a:-1;t?s--:++s<a;){var u=i[s];if(r(o[u],u,o)===!1)break}return e}}function f(t){return xt(t)&&Et.call(t)==Ot}function l(t){return!!t&&"object"==typeof t}function p(t){return null!=t&&(_t(t)?Rt.test(Dt.call(t)):Pt(t)&&Ut.test(t))}function d(t,e){var r=null==t?void 0:t[e];return Ht(r)?r:void 0}function y(t){return function(e){return null==e?void 0:e[t]}}function h(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=qt}function v(t){return null!=t&&zt($t(t))}function g(t){return Jt(t)&&Xt(t)&&Qt.call(t,"callee")&&!Yt.call(t,"callee")}function b(t,e){return t="number"==typeof t||ce.test(t)?+t:-1,e=null==e?fe:e,t>-1&&t%1==0&&t<e}function m(t){if(null==t)return[];ve(t)||(t=Object(t));var e=t.length;e=e&&he(e)&&(de(t)||pe(t))&&e||0;for(var r=t.constructor,n=-1,o="function"==typeof r&&r.prototype===t,i=Array(e),a=e>0;++n<e;)i[n]=n+"";for(var s in t)a&&ye(s,e)||"constructor"==s&&(o||!be.call(t,s))||i.push(s);return i}function w(t){for(var e=Oe(t),r=e.length,n=r&&t.length,o=!!n&&xe(n)&&(je(t)||we(t)),i=-1,a=[];++i<r;){var s=e[i];(o&&Ae(s,n)||Ee.call(t,s))&&a.push(s)}return a}function j(t,e){return Re(t,e,Ce)}function A(t,e){return function(r,n){var o=r?Le(r):0;if(!Ke(o))return t(r,n);for(var i=e?o:-1,a=Ne(r);(e?i--:++i<o)&&n(a[i],i,a)!==!1;);return r}}function x(t){return t}function O(t,e,r){if("function"!=typeof t)return Ve;if(void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,o){return t.call(e,r,n,o)};case 4:return function(r,n,o,i){return t.call(e,r,n,o,i)};case 5:return function(r,n,o,i,a){return t.call(e,r,n,o,i,a)}}return function(){return t.apply(e,arguments)}}function S(t,e){return function(r,n,o){return"function"==typeof n&&void 0===o&&We(r)?t(r,n):e(r,Je(n,o,3))}}function E(t){return function(e,r,n){return"function"==typeof r&&void 0===n||(r=nr(r,n,3)),t(e,r)}}function B(t){return function(e,r,n){return"function"==typeof r&&void 0===n||(r=cr(r,n,3)),t(e,r,fr)}}function T(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function _(t,e,r){r||(r={});for(var n=-1,o=e.length;++n<o;){var i=e[n];r[i]=t[i]}return r}function P(t,e){return null==e?t:br(e,mr(e),t)}function U(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Ar.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function I(t){var e=new Or(t.byteLength),r=new Sr(e);return r.set(new Sr(t)),e}function D(t,e,r){var n=t.constructor;switch(e){case Dr:return Br(t);case Tr:case _r:return new n(+t);case Fr:case Rr:case Cr:case Hr:case Lr:case Kr:case Nr:case kr:case Mr:var o=t.buffer;return new n(r?Br(o):o,t.byteOffset,t.length);case Pr:case Ir:return new n(t);case Ur:var i=new n(t.source,qr.exec(t));i.lastIndex=t.lastIndex}return i}function F(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}function R(t,e,r,n,o,i,a){var s;if(r&&(s=o?r(t,n,o):r(t)),void 0!==s)return s;if(!tn(t))return t;var u=Zr(t);if(u){if(s=Wr(t),!e)return zr(t,s)}else{var c=Bn.call(t),f=c==sn;if(c!=fn&&c!=en&&(!f||o))return Sn[c]?Qr(t,c,e):o?t:{};if(s=Yr(f?{}:t),!e)return Xr(s,t)}i||(i=[]),a||(a=[]);for(var l=i.length;l--;)if(i[l]==t)return a[l];return i.push(t),a.push(s),(u?Vr:Jr)(t,function(n,o){s[o]=R(n,e,r,o,t,i,a)}),s}function C(t,e,r){return"function"==typeof e?_n(t,!0,Pn(e,r,3)):_n(t,!0)}function H(t){return void 0===t}function L(t,e){void 0===e&&(e={});var r=e.id,n=e.typeId,o=e.alias,i=e.typeAlias,a=e.preview,s=e.at,u=e.offset,c=e.size,f={};r&&r.length&&(f.id=r.join(",")),o&&o.length&&(f.alias=o.join(",")),n&&n.length&&(f.typeId="string"==typeof n?n:n.join(",")),a&&(f.preview=!0),"string"==typeof s?f.at=s:s&&s.toISOString&&(f.at=s.toISOString());var l=oo.stringify(Object.assign({},f,{typeAlias:i,offset:u,size:c}));return t+"?"+l}function K(t,e){var r=this,n=L(t,e);return this.withSessionHandling(function(){return bo(n,r.props.config)})}function N(t,e){var r=this,n={eventType:t};return void 0!==e&&(n.retentionTime=e),this.withSessionHandling(function(){return wo("/event/log",r.props.config,n)})}function k(t){var e=this;return this.withSessionHandling(function(){return bo(t,e.props.config)})}function M(t,e){var r=this;return this.withSessionHandling(function(){return wo("/application/log/"+t,r.props.config,e)})}function q(t){var e=this;return this.withSessionHandling(function(){return wo("/application/logs",e.props.config,t)})}function G(t){var e=this;return this.withSessionHandling(function(){return bo(t,e.props.config)})}function $(t){var e=this;return this.withSessionHandling(function(){return bo(t,e.props.config)})}function z(t,e){var r=this;return this.withSessionHandling(function(){return wo(t,r.props.config,e)})}function V(t,e){return $.call(this,"/"+t+"/"+e)}function X(t,e,r){return $.call(this,"/"+t+"/"+e+"/"+r+"?json=true")}function J(t,e,r){return z.call(this,"/"+t+"/"+e,r)}function W(t,e,r,n){return z.call(this,"/"+t+"/"+e+"/"+r,n)}var Q,Y="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Z=Y.crypto||Y.msCrypto;if(Z&&Z.getRandomValues){var tt=new Uint8Array(16);Q=function(){return Z.getRandomValues(tt),tt}}if(!Q){var et=new Array(16);Q=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),et[e]=t>>>((3&e)<<3)&255;return et}}for(var rt=Q,nt=rt,ot=[],it={},at=0;at<256;at++)ot[at]=(at+256).toString(16).substr(1),it[ot[at]]=at;var st=nt(),ut=[1|st[0],st[1],st[2],st[3],st[4],st[5]],ct=16383&(st[6]<<8|st[7]),ft=0,lt=0,pt=i;pt.v1=o,pt.v4=i,pt.parse=r,pt.unparse=n;var dt=pt,yt=a,ht=s,vt=ht,gt=u,bt=gt,mt=c,wt=mt,jt=wt(),At=jt,xt=ht,Ot="[object Function]",St=Object.prototype,Et=St.toString,Bt=f,Tt=l,_t=Bt,Pt=Tt,Ut=/^\[object .+?Constructor\]$/,It=Object.prototype,Dt=Function.prototype.toString,Ft=It.hasOwnProperty,Rt=RegExp("^"+Dt.call(Ft).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ct=p,Ht=Ct,Lt=d,Kt=y,Nt=Kt,kt=Nt("length"),Mt=kt,qt=9007199254740991,Gt=h,$t=Mt,zt=Gt,Vt=v,Xt=Vt,Jt=Tt,Wt=Object.prototype,Qt=Wt.hasOwnProperty,Yt=Wt.propertyIsEnumerable,Zt=g,te=Lt,ee=Gt,re=Tt,ne="[object Array]",oe=Object.prototype,ie=oe.toString,ae=te(Array,"isArray"),se=ae||function(t){return re(t)&&ee(t.length)&&ie.call(t)==ne},ue=se,ce=/^\d+$/,fe=9007199254740991,le=b,pe=Zt,de=ue,ye=le,he=Gt,ve=ht,ge=Object.prototype,be=ge.hasOwnProperty,me=m,we=Zt,je=ue,Ae=le,xe=Gt,Oe=me,Se=Object.prototype,Ee=Se.hasOwnProperty,Be=w,Te=Lt,_e=Vt,Pe=ht,Ue=Be,Ie=Te(Object,"keys"),De=Ie?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&_e(t)?Ue(t):Pe(t)?Ie(t):[]}:Ue,Fe=De,Re=At,Ce=Fe,He=j,Le=Mt,Ke=Gt,Ne=gt,ke=A,Me=He,qe=ke,Ge=qe(Me),$e=Ge,ze=x,Ve=ze,Xe=O,Je=Xe,We=ue,Qe=S,Ye=yt,Ze=$e,tr=Qe,er=tr(Ye,Ze),rr=er,nr=Xe,or=E,ir=He,ar=or,sr=ar(ir),ur=sr,cr=Xe,fr=me,lr=B,pr=At,dr=lr,yr=dr(pr),hr=yr,vr=T,gr=_,br=gr,mr=Fe,wr=P,jr=Object.prototype,Ar=jr.hasOwnProperty,xr=U,Or=Y.ArrayBuffer,Sr=Y.Uint8Array,Er=I,Br=Er,Tr="[object Boolean]",_r="[object Date]",Pr="[object Number]",Ur="[object RegExp]",Ir="[object String]",Dr="[object ArrayBuffer]",Fr="[object Float32Array]",Rr="[object Float64Array]",Cr="[object Int8Array]",Hr="[object Int16Array]",Lr="[object Int32Array]",Kr="[object Uint8Array]",Nr="[object Uint8ClampedArray]",kr="[object Uint16Array]",Mr="[object Uint32Array]",qr=/\w*$/,Gr=D,$r=F,zr=vr,Vr=yt,Xr=wr,Jr=He,Wr=xr,Qr=Gr,Yr=$r,Zr=ue,tn=ht,en="[object Arguments]",rn="[object Array]",nn="[object Boolean]",on="[object Date]",an="[object Error]",sn="[object Function]",un="[object Map]",cn="[object Number]",fn="[object Object]",ln="[object RegExp]",pn="[object Set]",dn="[object String]",yn="[object WeakMap]",hn="[object ArrayBuffer]",vn="[object Float32Array]",gn="[object Float64Array]",bn="[object Int8Array]",mn="[object Int16Array]",wn="[object Int32Array]",jn="[object Uint8Array]",An="[object Uint8ClampedArray]",xn="[object Uint16Array]",On="[object Uint32Array]",Sn={};Sn[en]=Sn[rn]=Sn[hn]=Sn[nn]=Sn[on]=Sn[vn]=Sn[gn]=Sn[bn]=Sn[mn]=Sn[wn]=Sn[cn]=Sn[fn]=Sn[ln]=Sn[dn]=Sn[jn]=Sn[An]=Sn[xn]=Sn[On]=!0,Sn[an]=Sn[sn]=Sn[un]=Sn[pn]=Sn[yn]=!1;var En=Object.prototype,Bn=En.toString,Tn=R,_n=Tn,Pn=Xe,Un=C,In=H,Dn=e(function(t,e){function r(t){return t&&t.__esModule?t:{default:t}}function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return t.deep&&!t._innerMixer&&(t._innerMixer=!0,t._innerMixer=n(t)),function(e){function r(r,n){var o=e[n];if(!t.filter||t.filter(r,o,n)){var i=t.deep?t._innerMixer(o,r):r;e[n]=t.transform?t.transform(i,o,n):i}}for(var n=arguments,o=arguments.length,a=Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=n[u];if((0,d.default)(e)||!t.noOverwrite&&!(0,l.default)(e))return a.length>1?t._innerMixer.apply(t,[{}].concat(a)):(0,c.default)(a[0]);if(t.noOverwrite&&(!(0,l.default)(e)||!(0,l.default)(a[0])))return e;var f=t.chain?s.default:i.default;return a.forEach(function(t){f(t,r)}),e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var o=ur,i=r(o),a=hr,s=r(a),u=Un,c=r(u),f=ht,l=r(f),p=In,d=r(p);t.exports=e.default}),Fn=e(function(t,e){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=Dn,o=r(n),i=function(t){return"function"==typeof t},a=function(t){return!i(t)},s=(0,o.default)(),u=(0,o.default)({filter:i}),c=(0,o.default)({filter:i,chain:!0}),f=(0,o.default)({deep:!0}),l=(0,o.default)({deep:!0,noOverwrite:!0}),p=(0,o.default)({filter:a,deep:!0,chain:!0});e.default=o.default,e.mixin=s,e.mixinFunctions=u,e.mixinChainFunctions=c,e.merge=f,e.mergeUnique=l,e.mergeChainNonFunctions=p}),Rn=e(function(t,e){function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return t&&(0,m.default)(t.then)}function o(){for(var t=arguments,e=[],r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=t[o];return(0,m.default)(n[0])?(0,g.default)(n,function(t){(0,m.default)(t)&&e.push(t)}):(0,j.default)(n[0])&&(0,g.default)(n,function(t){(0,g.default)(t,function(t){(0,m.default)(t)&&e.push(t)})}),e}function i(t){for(var e=arguments,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=e[o];return A.mixinFunctions.apply(void 0,[t.methods].concat(n))}function a(t){for(var e=arguments,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=e[o];return t.refs=t.state=A.mixin.apply(void 0,[t.refs].concat(n)),t.refs}function s(t){for(var e=arguments,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=e[i];var a=o.apply(void 0,n);return t.init=t.enclose=t.init.concat(a),t.init}function u(t){for(var e=arguments,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=e[o];return A.merge.apply(void 0,[t.props].concat(n))}function c(t){for(var e=arguments,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=e[o];return A.mixin.apply(void 0,[t.static].concat(n))}function f(t,e){for(var r=arguments,n=O(t),o=arguments.length,i=Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=r[a];return e.apply(void 0,[n.fixed].concat(i)),n}function l(){for(var t=arguments,e=O(),r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=t[o];return(0,g.default)(n,function(t){t&&t.fixed&&(i(e.fixed,t.fixed.methods),a(e.fixed,t.fixed.refs||t.fixed.state),s(e.fixed,t.fixed.init||t.fixed.enclose),u(e.fixed,t.fixed.props),c(e.fixed,t.fixed.static))}),(0,A.mixin)(e,e.fixed.static)}function p(t){return(0,m.default)(t)&&(0,m.default)(t.methods)&&((0,m.default)(t.refs)||(0,m.default)(t.state))&&((0,m.default)(t.init)||(0,m.default)(t.enclose))&&(0,m.default)(t.props)&&(0,m.default)(t.static)&&(0,j.default)(t.fixed)}function d(t){var e=O();return e.fixed.refs=e.fixed.state=(0,A.mergeChainNonFunctions)(e.fixed.refs,t.prototype),(0,A.mixin)(e,(0,A.mixin)(e.fixed.static,t)),(0,A.mixinChainFunctions)(e.fixed.methods,t.prototype),s(e.fixed,function(e){var r=e.instance,n=e.args;return t.apply(r,n)}),e}function y(t){for(var e=arguments,r=O(),n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=e[i];return t.apply(void 0,[r.fixed].concat(o)),r}function h(){return console.log("stampit.mixin(), .mixIn(), .extend(), and .assign() are deprecated.","Use Object.assign or _.assign instead"),A.mixin.apply(this,arguments)}Object.defineProperty(e,"__esModule",{value:!0});var v=rr,g=r(v),b=Bt,m=r(b),w=ht,j=r(w),A=Fn,x=Object.create,O=function(t){var e={methods:{},refs:{},init:[],props:{},static:{}};e.state=e.refs,e.enclose=e.init,t&&(i(e,t.methods),a(e,t.refs),s(e,t.init),u(e,t.props),c(e,t.static));var r=function(t){for(var o=arguments,i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=o[s];var u=(0,A.mixin)(x(e.methods),e.refs,t);(0,A.mergeUnique)(u,e.props);var c=null;return e.init.length>0&&(0,g.default)(e.init,function(t){if((0,m.default)(t))if(c)c=c.then(function(e){u=e||u;var o=t.call(u,{args:a,instance:u,stamp:r});return o?n(o)?o:u=o:u});else{var e=t.call(u,{args:a,instance:u,stamp:r});if(!e)return;if(!n(e))return void(u=e);c=e}}),c?c.then(function(t){return t||u}):u},o=f.bind(null,e,a),p=f.bind(null,e,s);return(0,A.mixin)(r,{create:r,fixed:e,methods:f.bind(null,e,i),refs:o,state:o,init:p,enclose:p,props:f.bind(null,e,u),static:function(){for(var t=arguments,e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=t[o];var i=f.apply(void 0,[r.fixed,c].concat(n));return(0,A.mixin)(i,i.fixed.static)},compose:function(){for(var t=arguments,e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=t[o];return l.apply(void 0,[r].concat(n))}},e.static)};e.default=(0,A.mixin)(O,{methods:y.bind(null,i),refs:y.bind(null,a),init:y.bind(null,s),props:y.bind(null,u),static:function(){for(var t=arguments,e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=t[n];var o=y.apply(void 0,[c].concat(r));return(0,A.mixin)(o,o.fixed.static)},compose:l,mixin:h,extend:h,mixIn:h,assign:h,isStamp:p,convertConstructor:d}),t.exports=e.default}),Cn=t(Rn),Hn=e(function(t,e){var r=Object.prototype.hasOwnProperty,n=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}();e.arrayToObject=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)"undefined"!=typeof t[n]&&(r[n]=t[n]);return r},e.merge=function(t,n,o){if(!n)return t;if("object"!=typeof n){if(Array.isArray(t))t.push(n);else{if("object"!=typeof t)return[t,n];t[n]=!0}return t}if("object"!=typeof t)return[t].concat(n);var i=t;return Array.isArray(t)&&!Array.isArray(n)&&(i=e.arrayToObject(t,o)),Array.isArray(t)&&Array.isArray(n)?(n.forEach(function(n,i){r.call(t,i)?t[i]&&"object"==typeof t[i]?t[i]=e.merge(t[i],n,o):t.push(n):t[i]=n}),t):Object.keys(n).reduce(function(t,r){var i=n[r];return Object.prototype.hasOwnProperty.call(t,r)?t[r]=e.merge(t[r],i,o):t[r]=i,t},i)},e.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},e.encode=function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),r="",o=0;o<e.length;++o){var i=e.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?r+=e.charAt(o):i<128?r+=n[i]:i<2048?r+=n[192|i>>6]+n[128|63&i]:i<55296||i>=57344?r+=n[224|i>>12]+n[128|i>>6&63]+n[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(o)),r+=n[240|i>>18]+n[128|i>>12&63]+n[128|i>>6&63]+n[128|63&i])}return r},e.compact=function(t,r){if("object"!=typeof t||null===t)return t;var n=r||[],o=n.indexOf(t);if(o!==-1)return n[o];if(n.push(t),Array.isArray(t)){for(var i=[],a=0;a<t.length;++a)t[a]&&"object"==typeof t[a]?i.push(e.compact(t[a],n)):"undefined"!=typeof t[a]&&i.push(t[a]);return i}var s=Object.keys(t);return s.forEach(function(r){t[r]=e.compact(t[r],n)}),t},e.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},e.isBuffer=function(t){return null!==t&&"undefined"!=typeof t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}}),Ln=String.prototype.replace,Kn=/%20/g,Nn={default:"RFC3986",formatters:{RFC1738:function(t){return Ln.call(t,Kn,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"},kn=Hn,Mn=Nn,qn={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},Gn=Date.prototype.toISOString,$n={delimiter:"&",encode:!0,encoder:kn.encode,serializeDate:function(t){return Gn.call(t)},skipNulls:!1,strictNullHandling:!1},zn=function t(e,r,n,o,i,a,s,u,c,f,l){var p=e;if("function"==typeof s)p=s(r,p);else if(p instanceof Date)p=f(p);else if(null===p){if(o)return a?a(r):r;p=""}if("string"==typeof p||"number"==typeof p||"boolean"==typeof p||kn.isBuffer(p))return a?[l(a(r))+"="+l(a(p))]:[l(r)+"="+l(String(p))];var d=[];if("undefined"==typeof p)return d;var y;if(Array.isArray(s))y=s;else{var h=Object.keys(p);y=u?h.sort(u):h}for(var v=0;v<y.length;++v){var g=y[v];i&&null===p[g]||(d=Array.isArray(p)?d.concat(t(p[g],n(r,g),n,o,i,a,s,u,c,f,l)):d.concat(t(p[g],r+(c?"."+g:"["+g+"]"),n,o,i,a,s,u,c,f,l)))}return d},Vn=function(t,e){var r=t,n=e||{},o="undefined"==typeof n.delimiter?$n.delimiter:n.delimiter,i="boolean"==typeof n.strictNullHandling?n.strictNullHandling:$n.strictNullHandling,a="boolean"==typeof n.skipNulls?n.skipNulls:$n.skipNulls,s="boolean"==typeof n.encode?n.encode:$n.encode,u=s?"function"==typeof n.encoder?n.encoder:$n.encoder:null,c="function"==typeof n.sort?n.sort:null,f="undefined"!=typeof n.allowDots&&n.allowDots,l="function"==typeof n.serializeDate?n.serializeDate:$n.serializeDate;if("undefined"==typeof n.format)n.format=Mn.default;else if(!Object.prototype.hasOwnProperty.call(Mn.formatters,n.format))throw new TypeError("Unknown format option provided.");var p,d,y=Mn.formatters[n.format];if(null!==n.encoder&&void 0!==n.encoder&&"function"!=typeof n.encoder)throw new TypeError("Encoder has to be a function.");"function"==typeof n.filter?(d=n.filter,r=d("",r)):Array.isArray(n.filter)&&(d=n.filter,p=d);var h=[];if("object"!=typeof r||null===r)return"";var v;v=n.arrayFormat in qn?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":"indices";var g=qn[v];p||(p=Object.keys(r)),c&&p.sort(c);for(var b=0;b<p.length;++b){var m=p[b];a&&null===r[m]||(h=h.concat(zn(r[m],m,g,i,a,u,d,c,f,l,y)))}return h.join(o)},Xn=Hn,Jn=Object.prototype.hasOwnProperty,Wn={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:Xn.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},Qn=function(t,e){for(var r={},n=t.split(e.delimiter,e.parameterLimit===1/0?void 0:e.parameterLimit),o=0;o<n.length;++o){var i,a,s=n[o],u=s.indexOf("]=")===-1?s.indexOf("="):s.indexOf("]=")+1;u===-1?(i=e.decoder(s),a=e.strictNullHandling?null:""):(i=e.decoder(s.slice(0,u)),a=e.decoder(s.slice(u+1))),Jn.call(r,i)?r[i]=[].concat(r[i]).concat(a):r[i]=a}return r},Yn=function t(e,r,n){if(!e.length)return r;var o,i=e.shift();if("[]"===i)o=[],o=o.concat(t(e,r,n));else{o=n.plainObjects?Object.create(null):{};var a="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,s=parseInt(a,10);!isNaN(s)&&i!==a&&String(s)===a&&s>=0&&n.parseArrays&&s<=n.arrayLimit?(o=[],o[s]=t(e,r,n)):o[a]=t(e,r,n)}return o},Zn=function(t,e,r){if(t){var n=r.allowDots?t.replace(/\.([^\.\[]+)/g,"[$1]"):t,o=/^([^\[\]]*)/,i=/(\[[^\[\]]*\])/g,a=o.exec(n),s=[];if(a[1]){if(!r.plainObjects&&Jn.call(Object.prototype,a[1])&&!r.allowPrototypes)return;s.push(a[1])}for(var u=0;null!==(a=i.exec(n))&&u<r.depth;)u+=1,(r.plainObjects||!Jn.call(Object.prototype,a[1].replace(/\[|\]/g,""))||r.allowPrototypes)&&s.push(a[1]);return a&&s.push("["+n.slice(a.index)+"]"),Yn(s,e,r)}},to=function(t,e){var r=e||{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.delimiter="string"==typeof r.delimiter||Xn.isRegExp(r.delimiter)?r.delimiter:Wn.delimiter,r.depth="number"==typeof r.depth?r.depth:Wn.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:Wn.arrayLimit,r.parseArrays=r.parseArrays!==!1,r.decoder="function"==typeof r.decoder?r.decoder:Wn.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:Wn.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:Wn.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:Wn.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:Wn.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:Wn.strictNullHandling,""===t||null===t||"undefined"==typeof t)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof t?Qn(t,r):t,o=r.plainObjects?Object.create(null):{},i=Object.keys(n),a=0;a<i.length;++a){var s=i[a],u=Zn(s,n[s],r);o=Xn.merge(o,u,r)}return Xn.compact(o)},eo=Vn,ro=to,no=Nn,oo={formats:no,parse:ro,stringify:eo};!function(t){function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return g.iterable&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function s(t){var e=new FileReader,r=a(e);return e.readAsArrayBuffer(t),r}function u(t){var e=new FileReader,r=a(e);return e.readAsText(t),r}function c(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(g.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(g.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(g.arrayBuffer&&g.blob&&m(t))this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!w(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(t){var e=t.toUpperCase();return j.indexOf(e)>-1?e:t}function d(t,e){e=e||{};var r=e.body;if("string"==typeof t)this.url=t;else{if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=p(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function y(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function h(t){var e=new o;return t.split("\r\n").forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}}),e}function v(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var g={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(g.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(t){return t&&DataView.prototype.isPrototypeOf(t)},w=ArrayBuffer.isView||function(t){return t&&b.indexOf(Object.prototype.toString.call(t))>-1};o.prototype.append=function(t,n){t=e(t),n=r(n);var o=this.map[t];this.map[t]=o?o+","+n:n},o.prototype.delete=function(t){delete this.map[e(t)]},o.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},o.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},o.prototype.set=function(t,n){this.map[e(t)]=r(n)},o.prototype.forEach=function(t,e){var r=this;for(var n in r.map)r.map.hasOwnProperty(n)&&t.call(e,r.map[n],n,r)},o.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),n(t)},o.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},o.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),n(t)},g.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var j=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},l.call(d.prototype),l.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var A=[301,302,303,307,308];v.redirect=function(t,e){if(A.indexOf(e)===-1)throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=d,t.Response=v,t.fetch=function(t,e){return new Promise(function(r,n){var o=new d(t,e),i=new XMLHttpRequest;i.onload=function(){var t={status:i.status,statusText:i.statusText,headers:h(i.getAllResponseHeaders()||"")};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new v(e,t))},i.onerror=function(){n(new TypeError("Network request failed"))},i.ontimeout=function(){n(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&g.blob&&(i.responseType="blob"),o.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0);var io=self.fetch.bind(self),ao="application/json",so="https://appgrid-api.cloud.accedo.tv",uo="same-origin",co={accept:ao},fo=function(t){var e=t.ip;return e?{"X-FORWARDED-FOR":e}:{}},lo=function(t){var e=t.sessionKey;return e?{"X-SESSION":e}:{}},po=function(){return{"Content-Type":ao}},yo=function(t,e){void 0===e&&(e={});var r={appKey:t.appKey,uuid:t.deviceId};t.gid&&(r.gid=t.gid);var n=Object.assign({},e,r),o=oo.stringify(n);return o},ho=function(t,e){var r=t.split("?"),n=r[0],o=oo.parse(r[1]),i=yo(e,o);return""+so+n+"?"+i},vo=function(t){return Object.assign({},fo(t),lo(t))},go=function(t,e){var r=Object.assign({},co,vo(e)),n=ho(t,e);return e.log("Sending a GET request to: "+n+" with the following headers",r),io(n,{credentials:uo,headers:r}).then(function(t){if(t.status>=400)throw e.log("GET failed with status",t.status),t;return t})},bo=function(t,e){return e.log("Requesting",t),go(t,e).then(function(t){return t.json()}).then(function(t){return e.log("GET response",t),t})},mo=function(t,e){return go(t,e).then(function(t){return t.body})},wo=function(t,e,r){void 0===r&&(r={});var n=Object.assign({},co,po(),vo(e)),o=ho(t,e);e.log("Sending a POST request to: "+o+". With the following headers and body: ",n,r);var i={headers:n,credentials:uo,method:"post",body:JSON.stringify(r)};return io(o,i).then(function(t){var r=t.status,n=t.statusText;if(200!==r)throw new Error("AppGrid POST request returned a non-200 response. Status Code: "+r+". Status Text: "+n);var o={status:r,statusText:n};return e.log("POST response: ",{status:r,statusText:n}),o})},jo=Cn().init(function(t){var e,r=t.stamp;r.fixed.methods.createSession=function(){var t=this;return e?e:(this.props.config.sessionKey&&(this.props.config.sessionKey=null),e=bo("/session",this.props.config).then(function(r){var n=r.sessionKey;return t.props.config.sessionKey=n,e=null,n}).catch(function(t){throw e=null,t}))}}).methods({getSessionKey:function(){return this.props.config.sessionKey},withSessionHandling:function(t){var e=this;return this.getSessionKey()?t().catch(function(r){if(r&&401===r.status)return e.createSession().then(t);throw r}):this.createSession().then(t)}}),Ao=Cn().methods({getEntries:function(t){return K.call(this,"/content/entries",t)},getEntryById:function(t,e){return K.call(this,"/content/entry/"+t,e)},getEntryByAlias:function(t,e){return K.call(this,"/content/entry/alias/"+t,e)}}).compose(jo),xo=Cn().methods({getApplicationStatus:function(){var t=this;return this.withSessionHandling(function(){return bo("/status",t.props.config)})}}).compose(jo),Oo=Cn().methods({
getAllAssets:function(){var t=this;return this.withSessionHandling(function(){return bo("/asset",t.props.config)})},getAssetById:function(t){return mo("/asset/"+t,this.props.config)}}).compose(jo),So=Cn().methods({sendUsageStartEvent:function(){return N.call(this,"START")},sendUsageStopEvent:function(t){return N.call(this,"QUIT",t)}}).compose(jo),Eo="debug",Bo="info",To="warn",_o="error",Po=[Eo,Bo,To,_o],Uo=function(t,e){return void 0===t&&(t="0"),void 0===e&&(e="0"),parseInt(""+t+e,10)},Io=function(t,e){return t+(e?" | Metadata: "+JSON.stringify(e):"")},Do=function(t,e){void 0===t&&(t={});var r=Io(t.message,e),n=Uo(t.facilityCode,t.errorCode);return{code:n,message:r,dim1:t.dim1,dim2:t.dim2,dim3:t.dim3,dim4:t.dim4}},Fo=Cn().methods({getLogLevel:function(){return k.call(this,"/application/log/level").then(function(t){return t.logLevel})},sendLog:function(t,e){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];if(!Po.includes(t))return Promise.reject("Unsupported log level");var o=Do(e,r);return M.call(this,t,o)},sendLogs:function(t){var e=t.map(function(t){var e=t.logType,r=t.timestamp;return Object.assign(Do(t,t.metadata),{logType:e,timestamp:r})});return q.call(this,e)}}).compose(jo),Ro=Cn().methods({getAllEnabledPlugins:function(){var t=this;return this.withSessionHandling(function(){return bo("/plugins",t.props.config)})}}).compose(jo),Co=Cn().methods({getProfileInfo:function(){var t=this;return this.withSessionHandling(function(){return bo("/profile",t.props.config)})}}).compose(jo),Ho=Cn().methods({getAllMetadata:function(){return G.call(this,"/metadata")},getMetadataByKey:function(t){return G.call(this,"/metadata/"+t)},getMetadataByKeys:function(t){return G.call(this,"/metadata/"+t.join(","))}}).compose(jo),Lo="user",Ko="group",No=Cn().methods({getAllApplicationScopeDataByUser:function(t){return V.call(this,Lo,t)},getAllApplicationGroupScopeDataByUser:function(t){return V.call(this,Ko,t)},getApplicationScopeDataByUserAndKey:function(t,e){return X.call(this,Lo,t,e)},getApplicationGroupScopeDataByUserAndKey:function(t,e){return X.call(this,Ko,t,e)},setApplicationScopeUserData:function(t,e){return J.call(this,Lo,t,e)},setApplicationGroupScopeUserData:function(t,e){return J.call(this,Ko,t,e)},setApplicationScopeUserDataByKey:function(t,e,r){return W.call(this,Lo,t,e,r)},setApplicationGroupScopeUserDataByKey:function(t,e,r){return W.call(this,Ko,t,e,r)}}).compose(jo),ko=Cn().compose(jo,Ao,xo,Oo,So,Fo,Ro,Co,Ho,No),Mo=function(){},qo=function(t){void 0===t&&(t={});var e=t.appKey,r=t.deviceId,n=t.sessionKey;return e&&!r&&!n||e&&r&&!n||e&&r&&n},Go=function(t){var e=t.gid,r=t.appKey,n=t.ip,o=t.log;void 0===o&&(o=Mo);var i=t.onDeviceIdGenerated;void 0===i&&(i=Mo);var a=t.onSessionKeyChanged;void 0===a&&(a=Mo);var s=t.deviceId,u=t.sessionKey;if(!qo(t))throw new Error("You must provide an appKey | an appKey and a deviceId | an appKey, a deviceId and a sessionKey");s||(s=Go.generateUuid(),i(s));var c={deviceId:s,gid:e,ip:n,appKey:r,log:o,onSessionKeyChanged:a};return Object.defineProperty(c,"sessionKey",{set:function(t){u=t,a(t)},get:function(){return u}}),ko({props:{config:c}})};return Go.generateUuid=function(){return dt.v4()},Go});
