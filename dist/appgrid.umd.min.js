!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.appgrid=t()}(this,function(){"use strict";function e(e){return e&&e.__esModule?e.default:e}function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}function n(e,t){var n=t||0,r=ne;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function r(e,t,n){var r=t&&n||0,o=t||[];e=e||{};var i=void 0!==e.clockseq?e.clockseq:se,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),s=void 0!==e.nsecs?e.nsecs:ue+1,c=a-ce+(s-ue)/1e4;if(c<0&&void 0===e.clockseq&&(i=i+1&16383),(c<0||a>ce)&&void 0===e.nsecs&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ce=a,ue=s,se=i,a+=122192928e5;var u=(1e4*(268435455&a)+s)%4294967296;o[r++]=u>>>24&255,o[r++]=u>>>16&255,o[r++]=u>>>8&255,o[r++]=255&u;var f=a/4294967296*1e4&268435455;o[r++]=f>>>8&255,o[r++]=255&f,o[r++]=f>>>24&15|16,o[r++]=f>>>16&255,o[r++]=i>>>8|128,o[r++]=255&i;for(var l=e.node||ae,d=0;d<6;++d)o[r+d]=l[d];return t?t:oe(o)}function o(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||te)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[r+i]=o[i];return t||oe(o)}function i(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return ge(e)?e:Object(e)}function c(e){return function(t,n,r){for(var o=he(t),i=r(t),a=i.length,s=e?a:-1;e?s--:++s<a;){var c=i[s];if(n(o[c],c,o)===!1)break}return t}}function u(e){return ge(e)&&Ae.call(e)==je}function f(e){return!!e&&"object"==typeof e}function l(e){return null!=e&&(we(e)?Pe.test(Ie.call(e)):Oe(e)&&xe.test(e))}function d(e,t){var n=null==e?void 0:e[t];return Ue(n)?n:void 0}function p(e){return function(t){return null==t?void 0:t[e]}}function y(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Le}function g(e){return null!=e&&Be(Ee(e))}function h(e){return Oe(e)&&He(e)&&Fe.call(e,"callee")&&!Ne.call(e,"callee")}function v(e,t){return e="number"==typeof e||We.test(e)?+e:-1,t=null==t?Xe:t,e>-1&&e%1==0&&e<t}function m(e){if(null==e)return[];ge(e)||(e=Object(e));var t=e.length;t=t&&Be(t)&&(Ve(e)||Me(e))&&t||0;for(var n=e.constructor,r=-1,o="function"==typeof n&&n.prototype===e,i=Array(t),a=t>0;++r<t;)i[r]=r+"";for(var s in e)a&&Je(s,t)||"constructor"==s&&(o||!Ye.call(e,s))||i.push(s);return i}function b(e){for(var t=Ze(e),n=t.length,r=n&&e.length,o=!!r&&Be(r)&&(Ve(e)||Me(e)),i=-1,a=[];++i<n;){var s=t[i];(o&&Je(s,r)||tt.call(e,s))&&a.push(s)}return a}function j(e,t){return be(e,t,it)}function S(e,t){return function(n,r){var o=n?Ee(n):0;if(!Be(o))return e(n,r);for(var i=t?o:-1,a=he(n);(t?i--:++i<o)&&r(a[i],i,a)!==!1;);return n}}function A(e){return e}function w(e,t,n){if("function"!=typeof e)return ft;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)};case 5:return function(n,r,o,i,a){return e.call(t,n,r,o,i,a)}}return function(){return e.apply(t,arguments)}}function O(e,t){return function(n,r,o){return"function"==typeof r&&void 0===o&&Ve(n)?e(n,r):t(n,lt(r,o,3))}}function x(e){return function(t,n,r){return"function"==typeof n&&void 0===r||(n=lt(n,r,3)),e(t,n)}}function K(e){return function(t,n,r){return"function"==typeof n&&void 0===r||(n=lt(n,r,3)),e(t,n,Ze)}}function I(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function D(e,t,n){n||(n={});for(var r=-1,o=t.length;++r<o;){var i=t[r];n[i]=e[i]}return n}function P(e,t){return null==t?e:At(t,it(t),e)}function U(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&xt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function C(e){var t=new It(e.byteLength),n=new Dt(t);return n.set(new Dt(e)),t}function T(e,t,n){var r=e.constructor;switch(t){case Lt:return Pt(e);case Ut:case Ct:return new r(+e);case Bt:case Ht:case Rt:case Ft:case Nt:case Mt:case kt:case qt:case Gt:var o=e.buffer;return new r(n?Pt(o):o,e.byteOffset,e.length);case Tt:case Et:return new r(e);case _t:var i=new r(e.source,$t.exec(e));i.lastIndex=e.lastIndex}return i}function _(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}function E(e,t,n,r,o,i,a){var s;if(n&&(s=o?n(e,r,o):n(e)),void 0!==s)return s;if(!ge(e))return e;var c=Ve(e);if(c){if(s=Kt(e),!t)return St(e,s)}else{var u=jn.call(e),f=u==Zt;if(u!=nn&&u!=Wt&&(!f||o))return mn[u]?zt(e,u,t):o?e:{};if(s=Vt(f?{}:e),!t)return wt(s,e)}i||(i=[]),a||(a=[]);for(var l=i.length;l--;)if(i[l]==e)return a[l];return i.push(e),a.push(s),(c?ye:at)(e,function(r,o){s[o]=E(r,t,n,o,e,i,a)}),s}function L(e,t,n){return"function"==typeof t?Sn(e,!0,lt(t,n,3)):Sn(e,!0)}function B(e){return void 0===e}function H(e,t){void 0===t&&(t={});var n=t.id,r=t.typeId,o=t.alias,i=t.typeAlias,a=t.preview,s=t.at,c=t.offset,u=t.size,f=t.locale,l={};n&&Array.isArray(n)&&(l.id=n.join(",")),o&&Array.isArray(o)&&(l.alias=o.join(",")),r&&Array.isArray(r)&&(l.typeId=r.join(",")),a&&(l.preview=!0),"string"==typeof s?l.at=s:s&&s.toISOString&&(l.at=s.toISOString());var d=qn.stringify(Object.assign({},l,{typeAlias:i,offset:c,size:u,locale:f}));return e+"?"+d}function R(e,t){var n=this,r=H(e,t);return this.withSessionHandling(function(){return ir(r,n.props.config)})}function F(e,t){var n=this,r={eventType:e};return void 0!==t&&(r.retentionTime=t),this.withSessionHandling(function(){return sr("/event/log",n.props.config,r)})}function N(e){var t=this;return this.withSessionHandling(function(){return ir(e,t.props.config)})}function M(e,t){var n=this;return this.withSessionHandling(function(){return sr("/application/log/"+e,n.props.config,t)})}function k(e){var t=this;return this.withSessionHandling(function(){return sr("/application/logs",t.props.config,e)})}function q(e){var t=this;return this.withSessionHandling(function(){return ir(e,t.props.config)})}function G(e){var t=this;return this.withSessionHandling(function(){return ir(e,t.props.config)})}function $(e,t){var n=this;return this.withSessionHandling(function(){return sr(e,n.props.config,t)})}function z(e,t){return G.call(this,"/"+e+"/"+t)}function V(e,t,n){return G.call(this,"/"+e+"/"+t+"/"+n+"?json=true")}function W(e,t,n){return $.call(this,"/"+e+"/"+t,n)}function X(e,t,n,r){return $.call(this,"/"+e+"/"+t+"/"+n,r)}var J,Q="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Y=Q.crypto||Q.msCrypto;if(Y&&Y.getRandomValues){var Z=new Uint8Array(16);J=function(){return Y.getRandomValues(Z),Z}}if(!J){var ee=new Array(16);J=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),ee[t]=e>>>((3&t)<<3)&255;return ee}}for(var te=J,ne=[],re=0;re<256;++re)ne[re]=(re+256).toString(16).substr(1);var oe=n,ie=te(),ae=[1|ie[0],ie[1],ie[2],ie[3],ie[4],ie[5]],se=16383&(ie[6]<<8|ie[7]),ce=0,ue=0,fe=r,le=o,de=le;de.v1=fe,de.v4=le;var pe=de,ye=i,ge=a,he=s,ve=c,me=ve(),be=me,je="[object Function]",Se=Object.prototype,Ae=Se.toString,we=u,Oe=f,xe=/^\[object .+?Constructor\]$/,Ke=Object.prototype,Ie=Function.prototype.toString,De=Ke.hasOwnProperty,Pe=RegExp("^"+Ie.call(De).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=l,Ce=d,Te=p,_e=Te("length"),Ee=_e,Le=9007199254740991,Be=y,He=g,Re=Object.prototype,Fe=Re.hasOwnProperty,Ne=Re.propertyIsEnumerable,Me=h,ke="[object Array]",qe=Object.prototype,Ge=qe.toString,$e=Ce(Array,"isArray"),ze=$e||function(e){return Oe(e)&&Be(e.length)&&Ge.call(e)==ke},Ve=ze,We=/^\d+$/,Xe=9007199254740991,Je=v,Qe=Object.prototype,Ye=Qe.hasOwnProperty,Ze=m,et=Object.prototype,tt=et.hasOwnProperty,nt=b,rt=Ce(Object,"keys"),ot=rt?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&He(e)?nt(e):ge(e)?rt(e):[]}:nt,it=ot,at=j,st=S,ct=st(at),ut=ct,ft=A,lt=w,dt=O,pt=dt(ye,ut),yt=pt,gt=x,ht=gt(at),vt=ht,mt=K,bt=mt(be),jt=bt,St=I,At=D,wt=P,Ot=Object.prototype,xt=Ot.hasOwnProperty,Kt=U,It=Q.ArrayBuffer,Dt=Q.Uint8Array,Pt=C,Ut="[object Boolean]",Ct="[object Date]",Tt="[object Number]",_t="[object RegExp]",Et="[object String]",Lt="[object ArrayBuffer]",Bt="[object Float32Array]",Ht="[object Float64Array]",Rt="[object Int8Array]",Ft="[object Int16Array]",Nt="[object Int32Array]",Mt="[object Uint8Array]",kt="[object Uint8ClampedArray]",qt="[object Uint16Array]",Gt="[object Uint32Array]",$t=/\w*$/,zt=T,Vt=_,Wt="[object Arguments]",Xt="[object Array]",Jt="[object Boolean]",Qt="[object Date]",Yt="[object Error]",Zt="[object Function]",en="[object Map]",tn="[object Number]",nn="[object Object]",rn="[object RegExp]",on="[object Set]",an="[object String]",sn="[object WeakMap]",cn="[object ArrayBuffer]",un="[object Float32Array]",fn="[object Float64Array]",ln="[object Int8Array]",dn="[object Int16Array]",pn="[object Int32Array]",yn="[object Uint8Array]",gn="[object Uint8ClampedArray]",hn="[object Uint16Array]",vn="[object Uint32Array]",mn={};mn[Wt]=mn[Xt]=mn[cn]=mn[Jt]=mn[Qt]=mn[un]=mn[fn]=mn[ln]=mn[dn]=mn[pn]=mn[tn]=mn[nn]=mn[rn]=mn[an]=mn[yn]=mn[gn]=mn[hn]=mn[vn]=!0,mn[Yt]=mn[Zt]=mn[en]=mn[on]=mn[sn]=!1;var bn=Object.prototype,jn=bn.toString,Sn=E,An=L,wn=B,On=t(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return e.deep&&!e._innerMixer&&(e._innerMixer=!0,e._innerMixer=r(e)),function(t){function n(n,r){var o=t[r];if(!e.filter||e.filter(n,o,r)){var i=e.deep?e._innerMixer(o,n):n;t[r]=e.transform?e.transform(i,o,r):i}}for(var r=arguments,u=arguments.length,f=Array(u>1?u-1:0),l=1;l<u;l++)f[l-1]=r[l];if((0,c.default)(t)||!e.noOverwrite&&!(0,s.default)(t))return f.length>1?e._innerMixer.apply(e,[{}].concat(f)):(0,a.default)(f[0]);if(e.noOverwrite&&(!(0,s.default)(t)||!(0,s.default)(f[0])))return t;var d=e.chain?i.default:o.default;return f.forEach(function(e){d(e,n)}),t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(vt),i=n(jt),a=n(An),s=n(ge),c=n(wn);e.exports=t.default}),xn=t(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(On),o=function(e){return"function"==typeof e},i=function(e){return!o(e)},a=(0,r.default)(),s=(0,r.default)({filter:o}),c=(0,r.default)({filter:o,chain:!0}),u=(0,r.default)({deep:!0}),f=(0,r.default)({deep:!0,noOverwrite:!0}),l=(0,r.default)({filter:i,deep:!0,chain:!0});t.default=r.default,t.mixin=a,t.mixinFunctions=s,t.mixinChainFunctions=c,t.merge=u,t.mergeUnique=f,t.mergeChainNonFunctions=l}),Kn=t(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return e&&(0,v.default)(e.then)}function o(){for(var e=arguments,t=[],n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=e[o];return(0,v.default)(r[0])?(0,h.default)(r,function(e){(0,v.default)(e)&&t.push(e)}):(0,m.default)(r[0])&&(0,h.default)(r,function(e){(0,h.default)(e,function(e){(0,v.default)(e)&&t.push(e)})}),t}function i(e){for(var t=arguments,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=t[o];return xn.mixinFunctions.apply(void 0,[e.methods].concat(r))}function a(e){for(var t=arguments,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=t[o];return e.refs=e.state=xn.mixin.apply(void 0,[e.refs].concat(r)),e.refs}function s(e){for(var t=arguments,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=t[i];var a=o.apply(void 0,r);return e.init=e.enclose=e.init.concat(a),e.init}function c(e){for(var t=arguments,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=t[o];return xn.merge.apply(void 0,[e.props].concat(r))}function u(e){for(var t=arguments,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=t[o];return xn.mixin.apply(void 0,[e.static].concat(r))}function f(e,t){for(var n=arguments,r=j(e),o=arguments.length,i=Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=n[a];return t.apply(void 0,[r.fixed].concat(i)),r}function l(){for(var e=arguments,t=j(),n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=e[o];return(0,h.default)(r,function(e){e&&e.fixed&&(i(t.fixed,e.fixed.methods),a(t.fixed,e.fixed.refs||e.fixed.state),s(t.fixed,e.fixed.init||e.fixed.enclose),c(t.fixed,e.fixed.props),u(t.fixed,e.fixed.static))}),(0,xn.mixin)(t,t.fixed.static)}function d(e){return(0,v.default)(e)&&(0,v.default)(e.methods)&&((0,v.default)(e.refs)||(0,v.default)(e.state))&&((0,v.default)(e.init)||(0,v.default)(e.enclose))&&(0,v.default)(e.props)&&(0,v.default)(e.static)&&(0,m.default)(e.fixed)}function p(e){var t=j();return t.fixed.refs=t.fixed.state=(0,xn.mergeChainNonFunctions)(t.fixed.refs,e.prototype),(0,xn.mixin)(t,(0,xn.mixin)(t.fixed.static,e)),(0,xn.mixinChainFunctions)(t.fixed.methods,e.prototype),s(t.fixed,function(t){var n=t.instance,r=t.args;return e.apply(n,r)}),t}function y(e){for(var t=arguments,n=j(),r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=t[i];return e.apply(void 0,[n.fixed].concat(o)),n}function g(){return console.log("stampit.mixin(), .mixIn(), .extend(), and .assign() are deprecated.","Use Object.assign or _.assign instead"),xn.mixin.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var h=n(yt),v=n(we),m=n(ge),b=Object.create,j=function(e){var t={methods:{},refs:{},init:[],props:{},static:{}};t.state=t.refs,t.enclose=t.init,e&&(i(t,e.methods),a(t,e.refs),s(t,e.init),c(t,e.props),u(t,e.static));var n=function(e){for(var o=arguments,i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=o[s];var c=(0,xn.mixin)(b(t.methods),t.refs,e);(0,xn.mergeUnique)(c,t.props);var u=null;return t.init.length>0&&(0,h.default)(t.init,function(e){if((0,v.default)(e))if(u)u=u.then(function(t){c=t||c;var o=e.call(c,{args:a,instance:c,stamp:n});return o?r(o)?o:c=o:c});else{var t=e.call(c,{args:a,instance:c,stamp:n});if(!t)return;if(!r(t))return void(c=t);u=t}}),u?u.then(function(e){return e||c}):c},o=f.bind(null,t,a),d=f.bind(null,t,s);return(0,xn.mixin)(n,{create:n,fixed:t,methods:f.bind(null,t,i),refs:o,state:o,init:d,enclose:d,props:f.bind(null,t,c),static:function(){for(var e=arguments,t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=e[o];var i=f.apply(void 0,[n.fixed,u].concat(r));return(0,xn.mixin)(i,i.fixed.static)},compose:function(){for(var e=arguments,t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=e[o];return l.apply(void 0,[n].concat(r))}},t.static)};t.default=(0,xn.mixin)(j,{methods:y.bind(null,i),refs:y.bind(null,a),init:y.bind(null,s),props:y.bind(null,c),static:function(){for(var e=arguments,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=e[r];var o=y.apply(void 0,[u].concat(n));return(0,xn.mixin)(o,o.fixed.static)},compose:l,mixin:g,extend:g,mixIn:g,assign:g,isStamp:d,convertConstructor:p}),e.exports=t.default}),In=e(Kn),Dn=t(function(e,t){var n=Object.prototype.hasOwnProperty,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)"undefined"!=typeof e[r]&&(n[r]=e[r]);return n},t.merge=function(e,r,o){if(!r)return e;if("object"!=typeof r){if(Array.isArray(e))e.push(r);else{if("object"!=typeof e)return[e,r];(o.plainObjects||o.allowPrototypes||!n.call(Object.prototype,r))&&(e[r]=!0)}return e}if("object"!=typeof e)return[e].concat(r);var i=e;return Array.isArray(e)&&!Array.isArray(r)&&(i=t.arrayToObject(e,o)),Array.isArray(e)&&Array.isArray(r)?(r.forEach(function(r,i){n.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=t.merge(e[i],r,o):e.push(r):e[i]=r}),e):Object.keys(r).reduce(function(e,n){var i=r[n];return Object.prototype.hasOwnProperty.call(e,n)?e[n]=t.merge(e[n],i,o):e[n]=i,e},i)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",o=0;o<t.length;++o){var i=t.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?n+=t.charAt(o):i<128?n+=r[i]:i<2048?n+=r[192|i>>6]+r[128|63&i]:i<55296||i>=57344?n+=r[224|i>>12]+r[128|i>>6&63]+r[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(o)),n+=r[240|i>>18]+r[128|i>>12&63]+r[128|i>>6&63]+r[128|63&i])}return n},t.compact=function(e,n){if("object"!=typeof e||null===e)return e;var r=n||[],o=r.indexOf(e);if(o!==-1)return r[o];if(r.push(e),Array.isArray(e)){for(var i=[],a=0;a<e.length;++a)e[a]&&"object"==typeof e[a]?i.push(t.compact(e[a],r)):"undefined"!=typeof e[a]&&i.push(e[a]);return i}var s=Object.keys(e);return s.forEach(function(n){e[n]=t.compact(e[n],r)}),e},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&"undefined"!=typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}}),Pn=String.prototype.replace,Un=/%20/g,Cn={default:"RFC3986",formatters:{RFC1738:function(e){return Pn.call(e,Un,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},Tn={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},_n=Date.prototype.toISOString,En={delimiter:"&",encode:!0,encoder:Dn.encode,encodeValuesOnly:!1,serializeDate:function(e){return _n.call(e)},skipNulls:!1,strictNullHandling:!1},Ln=function e(t,n,r,o,i,a,s,c,u,f,l,d){var p=t;if("function"==typeof s)p=s(n,p);else if(p instanceof Date)p=f(p);else if(null===p){if(o)return a&&!d?a(n):n;p=""}if("string"==typeof p||"number"==typeof p||"boolean"==typeof p||Dn.isBuffer(p)){if(a){var y=d?n:a(n);return[l(y)+"="+l(a(p))]}return[l(n)+"="+l(String(p))]}var g=[];if("undefined"==typeof p)return g;var h;if(Array.isArray(s))h=s;else{var v=Object.keys(p);h=c?v.sort(c):v}for(var m=0;m<h.length;++m){var b=h[m];i&&null===p[b]||(g=Array.isArray(p)?g.concat(e(p[b],r(n,b),r,o,i,a,s,c,u,f,l,d)):g.concat(e(p[b],n+(u?"."+b:"["+b+"]"),r,o,i,a,s,c,u,f,l,d)))}return g},Bn=function(e,t){var n=e,r=t||{};if(null!==r.encoder&&void 0!==r.encoder&&"function"!=typeof r.encoder)throw new TypeError("Encoder has to be a function.");var o="undefined"==typeof r.delimiter?En.delimiter:r.delimiter,i="boolean"==typeof r.strictNullHandling?r.strictNullHandling:En.strictNullHandling,a="boolean"==typeof r.skipNulls?r.skipNulls:En.skipNulls,s="boolean"==typeof r.encode?r.encode:En.encode,c="function"==typeof r.encoder?r.encoder:En.encoder,u="function"==typeof r.sort?r.sort:null,f="undefined"!=typeof r.allowDots&&r.allowDots,l="function"==typeof r.serializeDate?r.serializeDate:En.serializeDate,d="boolean"==typeof r.encodeValuesOnly?r.encodeValuesOnly:En.encodeValuesOnly;if("undefined"==typeof r.format)r.format=Cn.default;else if(!Object.prototype.hasOwnProperty.call(Cn.formatters,r.format))throw new TypeError("Unknown format option provided.");var p,y,g=Cn.formatters[r.format];"function"==typeof r.filter?(y=r.filter,n=y("",n)):Array.isArray(r.filter)&&(y=r.filter,p=y);var h=[];if("object"!=typeof n||null===n)return"";var v;v=r.arrayFormat in Tn?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices";var m=Tn[v];p||(p=Object.keys(n)),u&&p.sort(u);for(var b=0;b<p.length;++b){var j=p[b];a&&null===n[j]||(h=h.concat(Ln(n[j],j,m,i,a,s?c:null,y,u,f,l,g,d)))}return h.join(o)},Hn=Object.prototype.hasOwnProperty,Rn={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:Dn.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},Fn=function(e,t){for(var n={},r=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),o=0;o<r.length;++o){var i,a,s=r[o],c=s.indexOf("]=")===-1?s.indexOf("="):s.indexOf("]=")+1;c===-1?(i=t.decoder(s),a=t.strictNullHandling?null:""):(i=t.decoder(s.slice(0,c)),a=t.decoder(s.slice(c+1))),Hn.call(n,i)?n[i]=[].concat(n[i]).concat(a):n[i]=a}return n},Nn=function(e,t,n){if(!e.length)return t;var r,o=e.shift();if("[]"===o)r=[],r=r.concat(Nn(e,t,n));else{r=n.plainObjects?Object.create(null):{};var i="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,a=parseInt(i,10);!isNaN(a)&&o!==i&&String(a)===i&&a>=0&&n.parseArrays&&a<=n.arrayLimit?(r=[],r[a]=Nn(e,t,n)):r[i]=Nn(e,t,n)}return r},Mn=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,i=/(\[[^[\]]*])/g,a=o.exec(r),s=a?r.slice(0,a.index):r,c=[];if(s){if(!n.plainObjects&&Hn.call(Object.prototype,s)&&!n.allowPrototypes)return;c.push(s)}for(var u=0;null!==(a=i.exec(r))&&u<n.depth;){if(u+=1,!n.plainObjects&&Hn.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+r.slice(a.index)+"]"),Nn(c,t,n)}},kn=function(e,t){var n=t||{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.delimiter="string"==typeof n.delimiter||Dn.isRegExp(n.delimiter)?n.delimiter:Rn.delimiter,n.depth="number"==typeof n.depth?n.depth:Rn.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:Rn.arrayLimit,n.parseArrays=n.parseArrays!==!1,n.decoder="function"==typeof n.decoder?n.decoder:Rn.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:Rn.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:Rn.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:Rn.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:Rn.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:Rn.strictNullHandling,""===e||null===e||"undefined"==typeof e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?Fn(e,n):e,o=n.plainObjects?Object.create(null):{},i=Object.keys(r),a=0;a<i.length;++a){var s=i[a],c=Mn(s,r[s],n);o=Dn.merge(o,c,n)}return Dn.compact(o)},qn={formats:Cn,parse:kn,stringify:Bn},Gn="function"==typeof fetch?fetch:function(e,t){return t=t||{},new Promise(function(n,r){function o(){var e,t=[],n=[],r={};return i.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(o,i,a){t.push(i=i.toLowerCase()),n.push([i,a]),e=r[i],r[i]=e?e+","+a:a}),{ok:1==(i.status/200|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:o,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},xml:function(){return Promise.resolve(i.responseXML)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return t},entries:function(){return n},get:function(e){return r[e.toLowerCase()]},has:function(e){return e.toLowerCase()in r}}}}var i=new XMLHttpRequest;i.open(t.method||"get",e);for(var a in t.headers)i.setRequestHeader(a,t.headers[a]);i.withCredentials="include"==t.credentials,i.onload=function(){n(o())},i.onerror=r,i.send(t.body)})},$n=Object.freeze({default:Gn}),zn=$n&&Gn||$n,Vn=window.fetch=zn,Wn="application/json",Xn="https://appgrid-api.cloud.accedo.tv",Jn="same-origin",Qn={accept:Wn},Yn=function(e){var t=e.ip;return t?{"X-FORWARDED-FOR":t}:{}},Zn=function(e){var t=e.sessionKey;return t?{"X-SESSION":t}:{}},er=function(){return{"Content-Type":Wn}},tr=function(e,t){void 0===t&&(t={});var n=e.sessionKey?{}:{appKey:e.appKey,uuid:e.deviceId};e.gid&&(n.gid=e.gid);var r=Object.assign({},t,n),o=qn.stringify(r);return o},nr=function(e,t){var n=t.target;void 0===n&&(n=Xn);var r=e.split("?"),o=r[0],i=qn.parse(r[1]),a=tr(t,i);return""+n+o+"?"+a},rr=function(e){return Object.assign({},Yn(e),Zn(e))},or=function(e,t){var n=Object.assign({},Qn,rr(t)),r=nr(e,t);return t.log("Sending a GET request to: "+r+" with the following headers",n),Vn(r,{credentials:Jn,headers:n}).then(function(e){if(e.status>=400)throw t.log("GET failed with status",e.status),e;return e})},ir=function(e,t){return t.log("Requesting",e),or(e,t).then(function(e){return e.json()}).then(function(e){return t.log("GET response",e),e})},ar=function(e,t){return or(e,t).then(function(e){return e.body})},sr=function(e,t,n){void 0===n&&(n={});var r=Object.assign({},Qn,er(),rr(t)),o=nr(e,t);t.log("Sending a POST request to: "+o+". With the following headers and body: ",r,n);var i={headers:r,credentials:Jn,method:"post",body:JSON.stringify(n)};return Vn(o,i).then(function(e){var n=e.status,r=e.statusText;if(200!==n)throw new Error("AppGrid POST request returned a non-200 response. Status Code: "+n+". Status Text: "+r);var o={status:n,statusText:r};return t.log("POST response: ",{status:n,statusText:r}),o})},cr=In().init(function(e){var t,n=e.instance;n.createSession=function(){var e=this;return t?t:(this.props.config.sessionKey&&(this.props.config.sessionKey=null),t=ir("/session",this.props.config).then(function(n){var r=n.sessionKey;return e.props.config.sessionKey=r,t=null,r}).catch(function(e){throw t=null,e}))}}).methods({getSessionKey:function(){return this.props.config.sessionKey},withSessionHandling:function(e){var t=this;return this.getSessionKey()?e().catch(function(n){if(n&&401===n.status)return t.createSession().then(e);throw n}):this.createSession().then(e)}}),ur=In().methods({getEntries:function(e){return R.call(this,"/content/entries",e)},getEntryById:function(e,t){return R.call(this,"/content/entry/"+e,t)},getEntryByAlias:function(e,t){return R.call(this,"/content/entry/alias/"+e,t)}}).compose(cr),fr=In().methods({getApplicationStatus:function(){var e=this;return this.withSessionHandling(function(){return ir("/status",e.props.config)})}}).compose(cr),lr=In().methods({getAllAssets:function(){var e=this;return this.withSessionHandling(function(){return ir("/asset",e.props.config)})},getAssetById:function(e){return ar("/asset/file/"+e,this.props.config)}}).compose(cr),dr=In().methods({sendUsageStartEvent:function(){return F.call(this,"START")},sendUsageStopEvent:function(e){return F.call(this,"QUIT",e)}}).compose(cr),pr="debug",yr="info",gr="warn",hr="error",vr=[pr,yr,gr,hr],mr=function(e,t){return void 0===e&&(e="0"),void 0===t&&(t="0"),parseInt(""+e+t,10)},br=function(e,t){return t?JSON.stringify([e,t]):e},jr=function(e,t){void 0===e&&(e={});var n=br(e.message,t),r=mr(e.facilityCode,e.errorCode);return{code:r,message:n,dim1:e.dim1,dim2:e.dim2,dim3:e.dim3,dim4:e.dim4}},Sr=In().methods({getLogLevel:function(){return N.call(this,"/application/log/level").then(function(e){return e.logLevel})},sendLog:function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];if(!vr.includes(e))return Promise.reject("Unsupported log level");var o=n.length?1===n.length?n[0]:n:void 0,i=jr(t,o);return M.call(this,e,i)},sendLogs:function(e){var t=e.map(function(e){var t=e.logType,n=e.timestamp;return Object.assign(jr(e,e.metadata),{logType:t,timestamp:n})});return k.call(this,t)}}).compose(cr),Ar=In().methods({getAllEnabledPlugins:function(){var e=this;return this.withSessionHandling(function(){return ir("/plugins",e.props.config)})}}).compose(cr),wr=In().methods({getProfileInfo:function(){var e=this;return this.withSessionHandling(function(){return ir("/profile",e.props.config)})}}).compose(cr),Or=In().methods({getAllMetadata:function(){return q.call(this,"/metadata")},getMetadataByKey:function(e){return q.call(this,"/metadata/"+e)},getMetadataByKeys:function(e){return q.call(this,"/metadata/"+e.join(","))}}).compose(cr),xr="user",Kr="group",Ir=In().methods({getAllApplicationScopeDataByUser:function(e){return z.call(this,xr,e)},getAllApplicationGroupScopeDataByUser:function(e){return z.call(this,Kr,e)},getApplicationScopeDataByUserAndKey:function(e,t){return V.call(this,xr,e,t)},getApplicationGroupScopeDataByUserAndKey:function(e,t){return V.call(this,Kr,e,t)},setApplicationScopeUserData:function(e,t){return W.call(this,xr,e,t)},setApplicationGroupScopeUserData:function(e,t){return W.call(this,Kr,e,t)},setApplicationScopeUserDataByKey:function(e,t,n){return X.call(this,xr,e,t,n)},setApplicationGroupScopeUserDataByKey:function(e,t,n){return X.call(this,Kr,e,t,n)}}).compose(cr),Dr=In().methods({getAvailableLocales:function(){var e=this;return this.withSessionHandling(function(){return ir("/locales",e.props.config)})}}).compose(cr),Pr=In().compose(cr,ur,fr,lr,dr,Sr,Ar,wr,Or,Ir,Dr),Ur={},Cr=In({props:{storageKeyDeviceId:"ag_d",storageKeySessionKey:"ag_s",hasLocalStorage:!1,hasSessionStorage:!1,hasSomeWebStorage:!1},methods:{getDeviceId:function(){return this.isAllowedToUseBrowserStorage?localStorage[this.storageKeyDeviceId]:Ur[this.storageKeyDeviceId]},setDeviceId:function(e){var t=Ur;return this.isAllowedToUseBrowserStorage&&(t=localStorage),t[this.storageKeyDeviceId]=e,t[this.storageKeyDeviceId]},getSessionKey:function(){return this.isAllowedToUseBrowserStorage?sessionStorage[this.storageKeySessionKey]:Ur[this.storageKeySessionKey]},setSessionKey:function(e){var t=Ur;return this.isAllowedToUseBrowserStorage&&(t=sessionStorage),t[this.storageKeySessionKey]=e,t[this.storageKeySessionKey]},getBrowserInfoProvider:function(){var e=this.getDeviceId(),t=this.getSessionKey();return{deviceId:e,sessionKey:t}}},init:function(e){function t(e){if(!e)return!1;try{var t="___a___",n="abc";return localStorage[t]=n,sessionStorage[t]=n,!0}catch(e){return!1}}var n=e.storageKeyDeviceId,r=e.storageKeySessionKey;return this.storageKeyDeviceId=n||this.storageKeyDeviceId,this.storageKeySessionKey=r||this.storageKeySessionKey,this.hasLocalStorage="undefined"!=typeof localStorage,this.hasSessionStorage="undefined"!=typeof sessionStorage,this.hasSomeWebStorage=this.hasSessionStorage||this.hasLocalStorage,this.isAllowedToUseBrowserStorage=t(this.hasSomeWebStorage),this}}),Tr=function(){},_r="undefined"!=typeof localStorage,Er="undefined"!=typeof sessionStorage,Lr=_r||Er,Br=function(e){void 0===e&&(e={});var t=e.appKey,n=e.deviceId,r=e.sessionKey;return t&&!n&&!r||t&&n&&!r||t&&n&&r},Hr=function(e){var t=e.gid,n=e.appKey,r=e.ip,o=e.target,i=e.log;void 0===i&&(i=Tr);var a=e.onDeviceIdGenerated;void 0===a&&(a=Tr);var s=e.onSessionKeyChanged;void 0===s&&(s=Tr);var c=e.deviceId,u=e.sessionKey;if(c||(u=null),!Br({appKey:n,deviceId:c,sessionKey:u}))throw new Error("You must provide an appKey | an appKey and a deviceId | an appKey, a deviceId and a sessionKey");c||(c=pe.v4(),a(c));var f={deviceId:c,gid:t,ip:r,appKey:n,target:o,log:i,onSessionKeyChanged:s};return Object.defineProperty(f,"sessionKey",{set:function(e){u=e,s(e)},get:function(){return u}}),Pr({props:{config:f}})},Rr="ag_d",Fr="ag_s",Nr=Cr({props:{storageKeyDeviceId:Rr,storageKeySessionKey:Fr}}),Mr=function(e){if(!Lr)return Hr(e);var t=e.browserInfoProvider;void 0===t&&(t=Nr.getBrowserInfoProvider.bind(Nr));var n=e.onDeviceIdGenerated;void 0===n&&(n=Nr.setDeviceId.bind(Nr));var r=e.onSessionKeyChanged;void 0===r&&(r=Nr.setSessionKey.bind(Nr));var o=e.deviceId,i=e.sessionKey;if((!o||!i)&&t){var a=t();o=o||a.deviceId,i=i||a.sessionKey}return Hr(Object.assign({},e,{deviceId:o,sessionKey:i,onDeviceIdGenerated:n,onSessionKeyChanged:r}))},kr=Lr?Mr:Hr;return kr});
