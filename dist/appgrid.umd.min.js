!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.appgrid=t()}(this,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(e,t){var n=t||0,r=ge;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function n(e,t,n){var r=t&&n||0,o=t||[];e=e||{};var i=void 0!==e.clockseq?e.clockseq:we,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:Oe+1,c=a-Ae+(u-Oe)/1e4;if(c<0&&void 0===e.clockseq&&(i=i+1&16383),(c<0||a>Ae)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ae=a,Oe=u,we=i,a+=122192928e5;var s=(1e4*(268435455&a)+u)%4294967296;o[r++]=s>>>24&255,o[r++]=s>>>16&255,o[r++]=s>>>8&255,o[r++]=255&s;var f=a/4294967296*1e4&268435455;o[r++]=f>>>8&255,o[r++]=255&f,o[r++]=f>>>24&15|16,o[r++]=f>>>16&255,o[r++]=i>>>8|128,o[r++]=255&i;for(var l=e.node||je,p=0;p<6;++p)o[r+p]=l[p];return t?t:be(o)}function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||ve)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[r+i]=o[i];return t||be(o)}function o(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return Ce(e)?e:Object(e)}function u(e){return function(t,n,r){for(var o=De(t),i=r(t),a=i.length,u=e?a:-1;e?u--:++u<a;){var c=i[u];if(n(o[c],c,o)===!1)break}return t}}function c(e){return Ce(e)&&He.call(e)==Te}function s(e){return!!e&&"object"==typeof e}function f(e){return null!=e&&(Fe(e)?$e.test(Me.call(e)):Ne(e)&&Be.test(e))}function l(e,t){var n=null==e?void 0:e[t];return qe(n)?n:void 0}function p(e){return function(t){return null==t?void 0:t[e]}}function d(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Xe}function y(e){return null!=e&&Je(Qe(e))}function v(e){return Ne(e)&&We(e)&&Ze.call(e,"callee")&&!et.call(e,"callee")}function g(e,t){return e="number"==typeof e||ct.test(e)?+e:-1,t=null==t?st:t,e>-1&&e%1==0&&e<t}function h(e){if(null==e)return[];Ce(e)||(e=Object(e));var t=e.length;t=t&&Je(t)&&(ut(e)||tt(e))&&t||0;for(var n=e.constructor,r=-1,o="function"==typeof n&&n.prototype===e,i=Array(t),a=t>0;++r<t;)i[r]=r+"";for(var u in e)a&&ft(u,t)||"constructor"==u&&(o||!pt.call(e,u))||i.push(u);return i}function b(e){for(var t=dt(e),n=t.length,r=n&&e.length,o=!!r&&Je(r)&&(ut(e)||tt(e)),i=-1,a=[];++i<n;){var u=t[i];(o&&ft(u,r)||vt.call(e,u))&&a.push(u)}return a}function m(e,t){return Re(e,t,mt)}function j(e,t){return function(n,r){var o=n?Qe(n):0;if(!Je(o))return e(n,r);for(var i=t?o:-1,a=De(n);(t?i--:++i<o)&&r(a[i],i,a)!==!1;);return n}}function w(e){return e}function A(e,t,n){if("function"!=typeof e)return xt;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)};case 5:return function(n,r,o,i,a){return e.call(t,n,r,o,i,a)}}return function(){return e.apply(t,arguments)}}function O(e,t){return function(n,r,o){return"function"==typeof r&&void 0===o&&ut(n)?e(n,r):t(n,St(r,o,3))}}function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function S(e){return Ct(e)?e:Object(e)}function P(e){return function(t,n,r){for(var o=Dt(t),i=r(t),a=i.length,u=e?a:-1;e?u--:++u<a;){var c=i[u];if(n(o[c],c,o)===!1)break}return t}}function I(e){return Ct(e)&&Ht.call(e)==Tt}function K(e){return!!e&&"object"==typeof e}function C(e){return null!=e&&(Ft(e)?$t.test(Mt.call(e)):Nt(e)&&Bt.test(e))}function D(e,t){var n=null==e?void 0:e[t];return qt(n)?n:void 0}function E(e){return function(t){return null==t?void 0:t[e]}}function L(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Xt}function R(e){return null!=e&&Jt(Qt(e))}function T(e){return Nt(e)&&Wt(e)&&Zt.call(e,"callee")&&!en.call(e,"callee")}function U(e,t){return e="number"==typeof e||sn.test(e)?+e:-1,t=null==t?fn:t,e>-1&&e%1==0&&e<t}function H(e){if(null==e)return[];Ct(e)||(e=Object(e));var t=e.length;t=t&&Jt(t)&&(cn(e)||tn(e))&&t||0;for(var n=e.constructor,r=-1,o="function"==typeof n&&n.prototype===e,i=Array(t),a=t>0;++r<t;)i[r]=r+"";for(var u in e)a&&ln(u,t)||"constructor"==u&&(o||!dn.call(e,u))||i.push(u);return i}function F(e){for(var t=yn(e),n=t.length,r=n&&e.length,o=!!r&&Jt(r)&&(cn(e)||tn(e)),i=-1,a=[];++i<n;){var u=t[i];(o&&ln(u,r)||gn.call(e,u))&&a.push(u)}return a}function N(e,t){return Rt(e,t,jn)}function B(e){return e}function k(e,t,n){if("function"!=typeof e)return An;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)};case 5:return function(n,r,o,i,a){return e.call(t,n,r,o,i,a)}}return function(){return e.apply(t,arguments)}}function M(e){return function(t,n,r){return"function"==typeof n&&void 0===r||(n=On(n,r,3)),e(t,n)}}function _(e){return function(t,n,r){return"function"==typeof n&&void 0===r||(n=On(n,r,3)),e(t,n,yn)}}function $(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function q(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function G(e,t,n){n||(n={});for(var r=-1,o=t.length;++r<o;){var i=t[r];n[i]=e[i]}return n}function z(e,t){return null==t?e:Ln(t,jn(t),e)}function V(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Un.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Q(e){var t=new Fn(e.byteLength),n=new Nn(t);return n.set(new Nn(e)),t}function X(e,t,n){var r=e.constructor;switch(t){case Gn:return Bn(e);case kn:case Mn:return new r(+e);case zn:case Vn:case Qn:case Xn:case Jn:case Wn:case Yn:case Zn:case er:var o=e.buffer;return new r(n?Bn(o):o,e.byteOffset,e.length);case _n:case qn:return new r(e);case $n:var i=new r(e.source,tr.exec(e));i.lastIndex=e.lastIndex}return i}function J(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}function W(e,t,n,r,o,i,a){var u;if(n&&(u=o?n(e,r,o):n(e)),void 0!==u)return u;if(!Ct(e))return e;var c=cn(e);if(c){if(u=Hn(e),!t)return Dn(e,u)}else{var s=Cr.call(e),f=s==sr;if(s!=pr&&s!=or&&(!f||o))return Ir[s]?nr(e,s,t):o?e:{};if(u=rr(f?{}:e),!t)return Rn(u,e)}i||(i=[]),a||(a=[]);for(var l=i.length;l--;)if(i[l]==e)return a[l];return i.push(e),a.push(u),(c?En:wn)(e,function(r,o){u[o]=W(r,t,n,o,e,i,a)}),u}function Y(e,t,n){return"function"==typeof t?Dr(e,!0,On(t,n,3)):Dr(e,!0)}function Z(e){return void 0===e}function ee(e,t){void 0===t&&(t={});var n=t.id,r=t.typeId,o=t.alias,i=t.typeAlias,a=t.preview,u=t.at,c=t.offset,s=t.size,f=t.locale,l={};n&&Array.isArray(n)&&(l.id=n.join(",")),o&&Array.isArray(o)&&(l.alias=o.join(",")),r&&Array.isArray(r)&&(l.typeId=r.join(",")),a&&(l.preview=!0),"string"==typeof u?l.at=u:u&&u.toISOString&&(l.at=u.toISOString());var p=Wr.stringify(Object.assign({},l,{typeAlias:i,offset:c,size:s,locale:f}));return e+"?"+p}function te(e,t){var n=this,r=ee(e,t);return this.withSessionHandling(function(){return io(r,n.props.config)})}function ne(e,t){var n=this,r={eventType:e};return void 0!==t&&(r.retentionTime=t),this.withSessionHandling(function(){return go("/event/log",n.props.config,r)})}function re(e){var t=this;return this.withSessionHandling(function(){return Ko(e,t.props.config)})}function oe(e){var t=this;return this.withSessionHandling(function(){return Eo(e,t.props.config)})}function ie(e,t){var n=this;return this.withSessionHandling(function(){return Lo(e,n.props.config,t)})}function ae(e,t){return oe.call(this,"/"+e+"/"+t)}function ue(e,t,n){return oe.call(this,"/"+e+"/"+t+"/"+n+"?json=true")}function ce(e,t,n){return ie.call(this,"/"+e+"/"+t,n)}function se(e,t,n,r){return ie.call(this,"/"+e+"/"+t+"/"+n,r)}var fe,le="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},pe=le.crypto||le.msCrypto;if(pe&&pe.getRandomValues){var de=new Uint8Array(16);fe=function(){return pe.getRandomValues(de),de}}if(!fe){var ye=new Array(16);fe=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),ye[t]=e>>>((3&t)<<3)&255;return ye}}for(var ve=fe,ge=[],he=0;he<256;++he)ge[he]=(he+256).toString(16).substr(1);var be=t,me=ve(),je=[1|me[0],me[1],me[2],me[3],me[4],me[5]],we=16383&(me[6]<<8|me[7]),Ae=0,Oe=0,xe=n,Se=r,Pe=Se;Pe.v1=xe,Pe.v4=Se;var Ie=Pe,Ke=o,Ce=i,De=a,Ee=u,Le=Ee(),Re=Le,Te="[object Function]",Ue=Object.prototype,He=Ue.toString,Fe=c,Ne=s,Be=/^\[object .+?Constructor\]$/,ke=Object.prototype,Me=Function.prototype.toString,_e=ke.hasOwnProperty,$e=RegExp("^"+Me.call(_e).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=f,Ge=l,ze=p,Ve=ze("length"),Qe=Ve,Xe=9007199254740991,Je=d,We=y,Ye=Object.prototype,Ze=Ye.hasOwnProperty,et=Ye.propertyIsEnumerable,tt=v,nt="[object Array]",rt=Object.prototype,ot=rt.toString,it=Ge(Array,"isArray"),at=it||function(e){return Ne(e)&&Je(e.length)&&ot.call(e)==nt},ut=at,ct=/^\d+$/,st=9007199254740991,ft=g,lt=Object.prototype,pt=lt.hasOwnProperty,dt=h,yt=Object.prototype,vt=yt.hasOwnProperty,gt=b,ht=Ge(Object,"keys"),bt=ht?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&We(e)?gt(e):Ce(e)?ht(e):[]}:gt,mt=bt,jt=m,wt=j,At=wt(jt),Ot=At,xt=w,St=A,Pt=O,It=Pt(Ke,Ot),Kt=It,Ct=x,Dt=S,Et=P,Lt=Et(),Rt=Lt,Tt="[object Function]",Ut=Object.prototype,Ht=Ut.toString,Ft=I,Nt=K,Bt=/^\[object .+?Constructor\]$/,kt=Object.prototype,Mt=Function.prototype.toString,_t=kt.hasOwnProperty,$t=RegExp("^"+Mt.call(_t).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=C,Gt=D,zt=E,Vt=zt("length"),Qt=Vt,Xt=9007199254740991,Jt=L,Wt=R,Yt=Object.prototype,Zt=Yt.hasOwnProperty,en=Yt.propertyIsEnumerable,tn=T,nn="[object Array]",rn=Object.prototype,on=rn.toString,an=Gt(Array,"isArray"),un=an||function(e){return Nt(e)&&Jt(e.length)&&on.call(e)==nn},cn=un,sn=/^\d+$/,fn=9007199254740991,ln=U,pn=Object.prototype,dn=pn.hasOwnProperty,yn=H,vn=Object.prototype,gn=vn.hasOwnProperty,hn=F,bn=Gt(Object,"keys"),mn=bn?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Wt(e)?hn(e):Ct(e)?bn(e):[]}:hn,jn=mn,wn=N,An=B,On=k,xn=M,Sn=xn(wn),Pn=Sn,In=_,Kn=In(Rt),Cn=Kn,Dn=$,En=q,Ln=G,Rn=z,Tn=Object.prototype,Un=Tn.hasOwnProperty,Hn=V,Fn=le.ArrayBuffer,Nn=le.Uint8Array,Bn=Q,kn="[object Boolean]",Mn="[object Date]",_n="[object Number]",$n="[object RegExp]",qn="[object String]",Gn="[object ArrayBuffer]",zn="[object Float32Array]",Vn="[object Float64Array]",Qn="[object Int8Array]",Xn="[object Int16Array]",Jn="[object Int32Array]",Wn="[object Uint8Array]",Yn="[object Uint8ClampedArray]",Zn="[object Uint16Array]",er="[object Uint32Array]",tr=/\w*$/,nr=X,rr=J,or="[object Arguments]",ir="[object Array]",ar="[object Boolean]",ur="[object Date]",cr="[object Error]",sr="[object Function]",fr="[object Map]",lr="[object Number]",pr="[object Object]",dr="[object RegExp]",yr="[object Set]",vr="[object String]",gr="[object WeakMap]",hr="[object ArrayBuffer]",br="[object Float32Array]",mr="[object Float64Array]",jr="[object Int8Array]",wr="[object Int16Array]",Ar="[object Int32Array]",Or="[object Uint8Array]",xr="[object Uint8ClampedArray]",Sr="[object Uint16Array]",Pr="[object Uint32Array]",Ir={};Ir[or]=Ir[ir]=Ir[hr]=Ir[ar]=Ir[ur]=Ir[br]=Ir[mr]=Ir[jr]=Ir[wr]=Ir[Ar]=Ir[lr]=Ir[pr]=Ir[dr]=Ir[vr]=Ir[Or]=Ir[xr]=Ir[Sr]=Ir[Pr]=!0,Ir[cr]=Ir[sr]=Ir[fr]=Ir[yr]=Ir[gr]=!1;var Kr=Object.prototype,Cr=Kr.toString,Dr=W,Er=Y,Lr=Z,Rr=e(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return e.deep&&!e._innerMixer&&(e._innerMixer=!0,e._innerMixer=r(e)),function(t){function n(n,r){var o=t[r];if(!e.filter||e.filter(n,o,r)){var i=e.deep?e._innerMixer(o,n):n;t[r]=e.transform?e.transform(i,o,r):i}}for(var r=arguments,s=arguments.length,f=Array(s>1?s-1:0),l=1;l<s;l++)f[l-1]=r[l];if((0,c.default)(t)||!e.noOverwrite&&!(0,u.default)(t))return f.length>1?e._innerMixer.apply(e,[{}].concat(f)):(0,a.default)(f[0]);if(e.noOverwrite&&(!(0,u.default)(t)||!(0,u.default)(f[0])))return t;var p=e.chain?i.default:o.default;return f.forEach(function(e){p(e,n)}),t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(Pn),i=n(Cn),a=n(Er),u=n(Ct),c=n(Lr);e.exports=t.default}),Tr=e(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(Rr),o=function(e){return"function"==typeof e},i=function(e){return!o(e)},a=(0,r.default)(),u=(0,r.default)({filter:o}),c=(0,r.default)({filter:o,chain:!0}),s=(0,r.default)({deep:!0}),f=(0,r.default)({deep:!0,noOverwrite:!0}),l=(0,r.default)({filter:i,deep:!0,chain:!0});t.default=r.default,t.mixin=a,t.mixinFunctions=u,t.mixinChainFunctions=c,t.merge=s,t.mergeUnique=f,t.mergeChainNonFunctions=l}),Ur=e(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return e&&(0,h.default)(e.then)}function o(){for(var e=arguments,t=[],n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=e[o];return(0,h.default)(r[0])?(0,g.default)(r,function(e){(0,h.default)(e)&&t.push(e)}):(0,b.default)(r[0])&&(0,g.default)(r,function(e){(0,g.default)(e,function(e){(0,h.default)(e)&&t.push(e)})}),t}function i(e){for(var t=arguments,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=t[o];return Tr.mixinFunctions.apply(void 0,[e.methods].concat(r))}function a(e){for(var t=arguments,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=t[o];return e.refs=e.state=Tr.mixin.apply(void 0,[e.refs].concat(r)),e.refs}function u(e){for(var t=arguments,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=t[i];var a=o.apply(void 0,r);return e.init=e.enclose=e.init.concat(a),e.init}function c(e){for(var t=arguments,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=t[o];return Tr.merge.apply(void 0,[e.props].concat(r))}function s(e){for(var t=arguments,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=t[o];return Tr.mixin.apply(void 0,[e.static].concat(r))}function f(e,t){for(var n=arguments,r=j(e),o=arguments.length,i=Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=n[a];return t.apply(void 0,[r.fixed].concat(i)),r}function l(){for(var e=arguments,t=j(),n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=e[o];return(0,g.default)(r,function(e){e&&e.fixed&&(i(t.fixed,e.fixed.methods),a(t.fixed,e.fixed.refs||e.fixed.state),u(t.fixed,e.fixed.init||e.fixed.enclose),c(t.fixed,e.fixed.props),s(t.fixed,e.fixed.static))}),(0,Tr.mixin)(t,t.fixed.static)}function p(e){return(0,h.default)(e)&&(0,h.default)(e.methods)&&((0,h.default)(e.refs)||(0,h.default)(e.state))&&((0,h.default)(e.init)||(0,h.default)(e.enclose))&&(0,h.default)(e.props)&&(0,h.default)(e.static)&&(0,b.default)(e.fixed)}function d(e){var t=j();return t.fixed.refs=t.fixed.state=(0,Tr.mergeChainNonFunctions)(t.fixed.refs,e.prototype),(0,Tr.mixin)(t,(0,Tr.mixin)(t.fixed.static,e)),(0,Tr.mixinChainFunctions)(t.fixed.methods,e.prototype),u(t.fixed,function(t){var n=t.instance,r=t.args;return e.apply(n,r)}),t}function y(e){for(var t=arguments,n=j(),r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=t[i];return e.apply(void 0,[n.fixed].concat(o)),n}function v(){return console.log("stampit.mixin(), .mixIn(), .extend(), and .assign() are deprecated.","Use Object.assign or _.assign instead"),Tr.mixin.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var g=n(Kt),h=n(Fe),b=n(Ce),m=Object.create,j=function(e){var t={methods:{},refs:{},init:[],props:{},static:{}};t.state=t.refs,t.enclose=t.init,e&&(i(t,e.methods),a(t,e.refs),u(t,e.init),c(t,e.props),s(t,e.static));var n=function(e){for(var o=arguments,i=arguments.length,a=Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=o[u];var c=(0,Tr.mixin)(m(t.methods),t.refs,e);(0,Tr.mergeUnique)(c,t.props);var s=null;return t.init.length>0&&(0,g.default)(t.init,function(e){if((0,h.default)(e))if(s)s=s.then(function(t){c=t||c;var o=e.call(c,{args:a,instance:c,stamp:n});return o?r(o)?o:c=o:c});else{var t=e.call(c,{args:a,instance:c,stamp:n});if(!t)return;if(!r(t))return void(c=t);s=t}}),s?s.then(function(e){return e||c}):c},o=f.bind(null,t,a),p=f.bind(null,t,u);return(0,Tr.mixin)(n,{create:n,fixed:t,methods:f.bind(null,t,i),refs:o,state:o,init:p,enclose:p,props:f.bind(null,t,c),static:function(){for(var e=arguments,t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=e[o];var i=f.apply(void 0,[n.fixed,s].concat(r));return(0,Tr.mixin)(i,i.fixed.static)},compose:function(){for(var e=arguments,t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=e[o];return l.apply(void 0,[n].concat(r))}},t.static)};t.default=(0,Tr.mixin)(j,{methods:y.bind(null,i),refs:y.bind(null,a),init:y.bind(null,u),props:y.bind(null,c),static:function(){for(var e=arguments,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=e[r];var o=y.apply(void 0,[s].concat(n));return(0,Tr.mixin)(o,o.fixed.static)},compose:l,mixin:v,extend:v,mixIn:v,assign:v,isStamp:p,convertConstructor:d}),e.exports=t.default}),Hr=e(function(e,t){var n=Object.prototype.hasOwnProperty,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var r=[],o=0;o<t.length;++o)"undefined"!=typeof t[o]&&r.push(t[o]);n.obj[n.prop]=r}}return t};t.arrayToObject=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)"undefined"!=typeof e[r]&&(n[r]=e[r]);return n},t.merge=function(e,r,o){if(!r)return e;if("object"!=typeof r){if(Array.isArray(e))e.push(r);else{if("object"!=typeof e)return[e,r];(o.plainObjects||o.allowPrototypes||!n.call(Object.prototype,r))&&(e[r]=!0)}return e}if("object"!=typeof e)return[e].concat(r);var i=e;return Array.isArray(e)&&!Array.isArray(r)&&(i=t.arrayToObject(e,o)),Array.isArray(e)&&Array.isArray(r)?(r.forEach(function(r,i){n.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=t.merge(e[i],r,o):e.push(r):e[i]=r}),e):Object.keys(r).reduce(function(e,i){var a=r[i];return n.call(e,i)?e[i]=t.merge(e[i],a,o):e[i]=a,e},i)},t.assign=function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",o=0;o<t.length;++o){var i=t.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?n+=t.charAt(o):i<128?n+=r[i]:i<2048?n+=r[192|i>>6]+r[128|63&i]:i<55296||i>=57344?n+=r[224|i>>12]+r[128|i>>6&63]+r[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(o)),n+=r[240|i>>18]+r[128|i>>12&63]+r[128|i>>6&63]+r[128|63&i])}return n},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],a=i.obj[i.prop],u=Object.keys(a),c=0;c<u.length;++c){var s=u[c],f=a[s];"object"==typeof f&&null!==f&&n.indexOf(f)===-1&&(t.push({obj:a,prop:s}),n.push(f))}return o(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&"undefined"!=typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}}),Fr=String.prototype.replace,Nr=/%20/g,Br={default:"RFC3986",formatters:{RFC1738:function(e){return Fr.call(e,Nr,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},kr={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Mr=Date.prototype.toISOString,_r={delimiter:"&",encode:!0,encoder:Hr.encode,encodeValuesOnly:!1,serializeDate:function(e){return Mr.call(e)},skipNulls:!1,strictNullHandling:!1},$r=function e(t,n,r,o,i,a,u,c,s,f,l,p){var d=t;if("function"==typeof u)d=u(n,d);else if(d instanceof Date)d=f(d);else if(null===d){if(o)return a&&!p?a(n,_r.encoder):n;d=""}if("string"==typeof d||"number"==typeof d||"boolean"==typeof d||Hr.isBuffer(d)){if(a){var y=p?n:a(n,_r.encoder);return[l(y)+"="+l(a(d,_r.encoder))]}return[l(n)+"="+l(String(d))]}var v=[];if("undefined"==typeof d)return v;var g;if(Array.isArray(u))g=u;else{var h=Object.keys(d);g=c?h.sort(c):h}for(var b=0;b<g.length;++b){var m=g[b];i&&null===d[m]||(v=Array.isArray(d)?v.concat(e(d[m],r(n,m),r,o,i,a,u,c,s,f,l,p)):v.concat(e(d[m],n+(s?"."+m:"["+m+"]"),r,o,i,a,u,c,s,f,l,p)))}return v},qr=function(e,t){var n=e,r=t?Hr.assign({},t):{};if(null!==r.encoder&&void 0!==r.encoder&&"function"!=typeof r.encoder)throw new TypeError("Encoder has to be a function.");var o="undefined"==typeof r.delimiter?_r.delimiter:r.delimiter,i="boolean"==typeof r.strictNullHandling?r.strictNullHandling:_r.strictNullHandling,a="boolean"==typeof r.skipNulls?r.skipNulls:_r.skipNulls,u="boolean"==typeof r.encode?r.encode:_r.encode,c="function"==typeof r.encoder?r.encoder:_r.encoder,s="function"==typeof r.sort?r.sort:null,f="undefined"!=typeof r.allowDots&&r.allowDots,l="function"==typeof r.serializeDate?r.serializeDate:_r.serializeDate,p="boolean"==typeof r.encodeValuesOnly?r.encodeValuesOnly:_r.encodeValuesOnly;if("undefined"==typeof r.format)r.format=Br.default;else if(!Object.prototype.hasOwnProperty.call(Br.formatters,r.format))throw new TypeError("Unknown format option provided.");var d,y,v=Br.formatters[r.format];"function"==typeof r.filter?(y=r.filter,n=y("",n)):Array.isArray(r.filter)&&(y=r.filter,d=y);var g=[];if("object"!=typeof n||null===n)return"";var h;h=r.arrayFormat in kr?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices";var b=kr[h];d||(d=Object.keys(n)),s&&d.sort(s);for(var m=0;m<d.length;++m){var j=d[m];a&&null===n[j]||(g=g.concat($r(n[j],j,b,i,a,u?c:null,y,s,f,l,v,p)))}var w=g.join(o),A=r.addQueryPrefix===!0?"?":"";return w.length>0?A+w:""},Gr=Object.prototype.hasOwnProperty,zr={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:Hr.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},Vr=function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=t.parameterLimit===1/0?void 0:t.parameterLimit,i=r.split(t.delimiter,o),a=0;a<i.length;++a){var u,c,s=i[a],f=s.indexOf("]="),l=f===-1?s.indexOf("="):f+1;l===-1?(u=t.decoder(s,zr.decoder),c=t.strictNullHandling?null:""):(u=t.decoder(s.slice(0,l),zr.decoder),c=t.decoder(s.slice(l+1),zr.decoder)),Gr.call(n,u)?n[u]=[].concat(n[u]).concat(c):n[u]=c}return n},Qr=function(e,t,n){for(var r=t,o=e.length-1;o>=0;--o){var i,a=e[o];if("[]"===a)i=[],i=i.concat(r);else{i=n.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(u,10);!isNaN(c)&&a!==u&&String(c)===u&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(i=[],i[c]=r):i[u]=r}r=i}return r},Xr=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,i=/(\[[^[\]]*])/g,a=o.exec(r),u=a?r.slice(0,a.index):r,c=[];if(u){if(!n.plainObjects&&Gr.call(Object.prototype,u)&&!n.allowPrototypes)return;c.push(u)}for(var s=0;null!==(a=i.exec(r))&&s<n.depth;){if(s+=1,!n.plainObjects&&Gr.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+r.slice(a.index)+"]"),Qr(c,t,n)}},Jr=function(e,t){var n=t?Hr.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=n.ignoreQueryPrefix===!0,n.delimiter="string"==typeof n.delimiter||Hr.isRegExp(n.delimiter)?n.delimiter:zr.delimiter,n.depth="number"==typeof n.depth?n.depth:zr.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:zr.arrayLimit,n.parseArrays=n.parseArrays!==!1,n.decoder="function"==typeof n.decoder?n.decoder:zr.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:zr.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:zr.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:zr.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:zr.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:zr.strictNullHandling,""===e||null===e||"undefined"==typeof e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?Vr(e,n):e,o=n.plainObjects?Object.create(null):{},i=Object.keys(r),a=0;a<i.length;++a){var u=i[a],c=Xr(u,r[u],n);o=Hr.merge(o,c,n)}return Hr.compact(o)},Wr={formats:Br,parse:Jr,stringify:qr},Yr="function"==typeof fetch?fetch:function(e,t){return t=t||{},new Promise(function(n,r){function o(){var e,t=[],n=[],r={};return i.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(o,i,a){t.push(i=i.toLowerCase()),n.push([i,a]),e=r[i],r[i]=e?e+","+a:a}),{ok:1==(i.status/200|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:o,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},xml:function(){return Promise.resolve(i.responseXML)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return t},entries:function(){return n},get:function(e){return r[e.toLowerCase()]},has:function(e){return e.toLowerCase()in r}}}}var i=new XMLHttpRequest;i.open(t.method||"get",e);for(var a in t.headers)i.setRequestHeader(a,t.headers[a]);i.withCredentials="include"==t.credentials,i.onload=function(){n(o())},i.onerror=r,i.send(t.body)})},Zr=Object.freeze({default:Yr}),eo=Zr&&Yr||Zr,to=window.fetch=eo,no=e(function(e){var t="application/json",n="https://appgrid-api.cloud.accedo.tv",r="same-origin",o={accept:t},i=function(e){var t=e.ip;return t?{"X-FORWARDED-FOR":t}:{}},a=function(e){var t=e.sessionKey;return t?{"X-SESSION":t}:{}},u=function(){return{"Content-Type":t}},c=function(e,t){void 0===t&&(t={});var n=e.sessionKey?{}:{appKey:e.appKey,uuid:e.deviceId};e.gid&&(n.gid=e.gid);var r=Object.assign({},t,n),o=Wr.stringify(r);return o},s=function(e,t){var r=t.target;void 0===r&&(r=n);var o=e.split("?"),i=o[0],a=Wr.parse(o[1]),u=c(t,a);return""+r+i+"?"+u},f=function(e){return Object.assign({},i(e),a(e))},l=function(e,t){var n=Object.assign({},o,f(t)),i=s(e,t);return t.log("Sending a GET request to: "+i+" with the following headers",n),to(i,{credentials:r,headers:n}).then(function(e){if(e.status>=400)throw t.log("GET failed with status",e.status),e;return e})};e.exports.grab=function(e,t){return t.log("Requesting",e),l(e,t).then(function(e){return e.json()}).then(function(e){return t.log("GET response",e),e})},e.exports.grabRaw=function(e,t){return l(e,t).then(function(e){return e.body})},e.exports.post=function(e,t,n){void 0===n&&(n={});var i=Object.assign({},o,u(),f(t)),a=s(e,t);t.log("Sending a POST request to: "+a+". With the following headers and body: ",i,n);var c={headers:i,credentials:r,method:"post",body:JSON.stringify(n)};return to(a,c).then(function(e){var n=e.status,r=e.statusText;if(200!==n)throw new Error("AppGrid POST request returned a non-200 response. Status Code: "+n+". Status Text: "+r);var o={status:n,statusText:r};return t.log("POST response: ",{status:n,statusText:r}),o})}}),ro=no.grab,oo=Ur().init(function(e){var t,n=e.instance;n.createSession=function(){var e=this;return t?t:(this.props.config.sessionKey&&(this.props.config.sessionKey=null),t=ro("/session",this.props.config).then(function(n){var r=n.sessionKey;return e.props.config.sessionKey=r,t=null,r}).catch(function(e){throw t=null,e}))}}).methods({getSessionKey:function(){return this.props.config.sessionKey},withSessionHandling:function(e){var t=this;return this.getSessionKey()?e().catch(function(n){if(n&&401===n.status)return t.createSession().then(e);throw n}):this.createSession().then(e)}}),io=no.grab,ao=Ur().methods({getEntries:function(e){return te.call(this,"/content/entries",e)},getEntryById:function(e,t){return te.call(this,"/content/entry/"+e,t)},getEntryByAlias:function(e,t){return te.call(this,"/content/entry/alias/"+e,t)}}).compose(oo),uo=ao,co=no.grab,so=Ur().methods({getApplicationStatus:function(){var e=this;return this.withSessionHandling(function(){return co("/status",e.props.config)})}}).compose(oo),fo=so,lo=no.grab,po=no.grabRaw,yo=Ur().methods({getAllAssets:function(){var e=this;return this.withSessionHandling(function(){return lo("/asset",e.props.config)})},getAssetById:function(e){return po("/asset/file/"+e,this.props.config)}}).compose(oo),vo=yo,go=no.post,ho=Ur().methods({sendUsageStartEvent:function(){return ne.call(this,"START")},sendUsageStopEvent:function(e){return ne.call(this,"QUIT",e)}}).compose(oo),bo=ho,mo=function(){return"undefined"!=typeof window},jo={isBrowser:mo},wo=e(function(e){function t(e){var t=this;return this.withSessionHandling(function(){return a(e,t.props.config)})}function n(e,t){return u("/application/log/"+e,this.props.config,t)}function r(e,t){var r=this;return this.withSessionHandling(function(){var o=n.bind(r,e,t);return i?r.getLogLevel().then(function(t){return y.indexOf(t)>y.indexOf(e)?Promise.resolve({status:200,statusText:"Request avoided",requestAvoided:!0}):o()}):o()})}function o(e){var t=this;return this.withSessionHandling(function(){return u("/application/logs",t.props.config,e)})}var i=jo.isBrowser(),a=no.grab,u=no.post,c="debug",s="info",f="warn",l="error",p="off",d=[c,s,f,l],y=[c,s,f,l,p],v=function(e,t){return void 0===e&&(e="0"),void 0===t&&(t="0"),parseInt(""+e+t,10)},g=function(e,t){return t?JSON.stringify([e,t]):e},h=function(e,t){void 0===e&&(e={});var n=g(e.message,t),r=v(e.facilityCode,e.errorCode);return{code:r,message:n,dim1:e.dim1,dim2:e.dim2,dim3:e.dim3,dim4:e.dim4}},b=18e4,m=Ur().init(function(e){var n,r=e.instance,o={};r.getLogLevel=function(){if(n)return n;var e=o.logLevel,r=o.timestamp;return void 0===r&&(r=0),Date.now()-r<b?Promise.resolve(e):n=t.call(this,"/application/log/level").then(function(e){var t=e.logLevel;return n=null,o={logLevel:t,timestamp:Date.now()},t}).catch(function(e){throw n=null,e})}}).methods({sendLog:function(e,t){for(var n=[],o=arguments.length-2;o-- >0;)n[o]=arguments[o+2];if(!d.includes(e))return Promise.reject("Unsupported log level");var i=n.length?1===n.length?n[0]:n:void 0,a=h(t,i);return r.call(this,e,a)},sendLogs:function(e){var t=e.map(function(e){var t=e.logType,n=e.timestamp;return Object.assign(h(e,e.metadata),{logType:t,timestamp:n})});return o.call(this,t)}}).compose(oo);e.exports=m}),Ao=no.grab,Oo=Ur().methods({getAllEnabledPlugins:function(){var e=this;return this.withSessionHandling(function(){return Ao("/plugins",e.props.config)})}}).compose(oo),xo=Oo,So=no.grab,Po=Ur().methods({getProfileInfo:function(){var e=this;return this.withSessionHandling(function(){return So("/profile",e.props.config)})}}).compose(oo),Io=Po,Ko=no.grab,Co=Ur().methods({getAllMetadata:function(){return re.call(this,"/metadata")},getMetadataByKey:function(e){return re.call(this,"/metadata/"+e)},getMetadataByKeys:function(e){return re.call(this,"/metadata/"+e.join(","))}}).compose(oo),Do=Co,Eo=no.grab,Lo=no.post,Ro="user",To="group",Uo=Ur().methods({getAllApplicationScopeDataByUser:function(e){return ae.call(this,Ro,e)},getAllApplicationGroupScopeDataByUser:function(e){return ae.call(this,To,e)},getApplicationScopeDataByUserAndKey:function(e,t){return ue.call(this,Ro,e,t)},getApplicationGroupScopeDataByUserAndKey:function(e,t){return ue.call(this,To,e,t)},setApplicationScopeUserData:function(e,t){return ce.call(this,Ro,e,t)},setApplicationGroupScopeUserData:function(e,t){return ce.call(this,To,e,t)},setApplicationScopeUserDataByKey:function(e,t,n){return se.call(this,Ro,e,t,n)},setApplicationGroupScopeUserDataByKey:function(e,t,n){return se.call(this,To,e,t,n)}}).compose(oo),Ho=Uo,Fo=no.grab,No=Ur().methods({getAvailableLocales:function(){var e=this;return this.withSessionHandling(function(){return Fo("/locales",e.props.config)})}}).compose(oo),Bo=No,ko=Ur().compose(oo,uo,fo,vo,bo,wo,xo,Io,Do,Ho,Bo),Mo=ko,_o=e(function(e){
var t=function(){},n=!1,r=!1;try{n="undefined"!=typeof localStorage,r="undefined"!=typeof sessionStorage}catch(e){}var o=n||r,i=function(e){void 0===e&&(e={});var t=e.appKey,n=e.deviceId,r=e.sessionKey;return t&&!n&&!r||t&&n},a=function(e){var n=e.gid,r=e.appKey,o=e.ip,a=e.target,u=e.log;void 0===u&&(u=t);var c=e.onDeviceIdGenerated;void 0===c&&(c=t);var s=e.onSessionKeyChanged;void 0===s&&(s=t);var f=e.deviceId,l=e.sessionKey;if(f||(l=null),!i({appKey:r,deviceId:f,sessionKey:l}))throw new Error("You must provide an appKey | an appKey and a deviceId | an appKey, a deviceId and a sessionKey");f||(f=Ie.v4(),c(f));var p={deviceId:f,gid:n,ip:o,appKey:r,target:a,log:u,onSessionKeyChanged:s};return Object.defineProperty(p,"sessionKey",{set:function(e){l=e,s(e)},get:function(){return l}}),Mo({props:{config:p}})},u="ag_d",c="ag_s",s=function(){try{var e=localStorage[u],t=r?sessionStorage[c]:void 0;return{deviceId:e,sessionKey:t}}catch(e){return{}}},f=function(e){if(n)try{localStorage[u]=e}catch(e){}},l=function(e){if(r)try{sessionStorage[c]=e}catch(e){}},p=function(e){if(!o)return a(e);var t=e.browserInfoProvider;void 0===t&&(t=s);var n=e.onDeviceIdGenerated;void 0===n&&(n=f);var r=e.onSessionKeyChanged;void 0===r&&(r=l);var i=e.deviceId,u=e.sessionKey;if((!i||!u)&&t){var c=t();i=i||c.deviceId,u=u||c.sessionKey}return a(Object.assign({},e,{deviceId:i,sessionKey:u,onDeviceIdGenerated:n,onSessionKeyChanged:r}))};e.exports=o?p:a});return _o});
